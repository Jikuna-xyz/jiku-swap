"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/jxp/webhook";
exports.ids = ["pages/api/jxp/webhook"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "viem":
/*!***********************!*\
  !*** external "viem" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("viem");;

/***/ }),

/***/ "viem/accounts":
/*!********************************!*\
  !*** external "viem/accounts" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("viem/accounts");;

/***/ }),

/***/ "(api)/__barrel_optimize__?names=addHours!=!./node_modules/date-fns/index.mjs":
/*!******************************************************************************!*\
  !*** __barrel_optimize__?names=addHours!=!./node_modules/date-fns/index.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHours: () => (/* reexport safe */ D_user_jiku_swap_backend_node_modules_date_fns_addHours_mjs__WEBPACK_IMPORTED_MODULE_0__.addHours)
/* harmony export */ });
/* harmony import */ var D_user_jiku_swap_backend_node_modules_date_fns_addHours_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/date-fns/addHours.mjs */ "(api)/./node_modules/date-fns/addHours.mjs");



/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fwebhook&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cwebhook.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fwebhook&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cwebhook.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_jxp_webhook_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\jxp\\webhook.ts */ \"(api)/./pages/api/jxp/webhook.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_jxp_webhook_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_jxp_webhook_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_jxp_webhook_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_jxp_webhook_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/jxp/webhook\",\n        pathname: \"/api/jxp/webhook\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_jxp_webhook_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmp4cCUyRndlYmhvb2smcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2p4cCU1Q3dlYmhvb2sudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLz84OTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcanhwXFxcXHdlYmhvb2sudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9qeHAvd2ViaG9va1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2p4cC93ZWJob29rXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fwebhook&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cwebhook.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./config/chains.ts":
/*!**************************!*\
  !*** ./config/chains.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NATIVE_TOKEN_ADDRESS: () => (/* binding */ NATIVE_TOKEN_ADDRESS),\n/* harmony export */   monadTestnet: () => (/* binding */ monadTestnet)\n/* harmony export */ });\nconst monadTestnet = {\n    id: 1337,\n    name: \"Monad Testnet\",\n    network: \"monad-testnet\",\n    nativeCurrency: {\n        decimals: 18,\n        name: \"Monad\",\n        symbol: \"MON\"\n    },\n    rpcUrls: {\n        default: {\n            http: [\n                \"https://testnet-rpc.monad.xyz\"\n            ]\n        },\n        public: {\n            http: [\n                \"https://testnet-rpc.monad.xyz\"\n            ]\n        }\n    },\n    blockExplorers: {\n        default: {\n            name: \"Monad Explorer\",\n            url: \"https://explorer.monad.xyz\"\n        }\n    }\n};\nconst NATIVE_TOKEN_ADDRESS = \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25maWcvY2hhaW5zLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRU8sTUFBTUEsZUFBZTtJQUMxQkMsSUFBSTtJQUNKQyxNQUFNO0lBQ05DLFNBQVM7SUFDVEMsZ0JBQWdCO1FBQ2RDLFVBQVU7UUFDVkgsTUFBTTtRQUNOSSxRQUFRO0lBQ1Y7SUFDQUMsU0FBUztRQUNQQyxTQUFTO1lBQ1BDLE1BQU07Z0JBQUM7YUFBZ0M7UUFDekM7UUFDQUMsUUFBUTtZQUNORCxNQUFNO2dCQUFDO2FBQWdDO1FBQ3pDO0lBQ0Y7SUFDQUUsZ0JBQWdCO1FBQ2RILFNBQVM7WUFDUE4sTUFBTTtZQUNOVSxLQUFLO1FBQ1A7SUFDRjtBQUNGLEVBQUM7QUFFTSxNQUFNQyx1QkFBdUIsNkNBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2NvbmZpZy9jaGFpbnMudHM/MmViMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVDaGFpbiB9IGZyb20gJ3ZpZW0nXHJcblxyXG5leHBvcnQgY29uc3QgbW9uYWRUZXN0bmV0ID0ge1xyXG4gIGlkOiAxMzM3LFxyXG4gIG5hbWU6ICdNb25hZCBUZXN0bmV0JyxcclxuICBuZXR3b3JrOiAnbW9uYWQtdGVzdG5ldCcsXHJcbiAgbmF0aXZlQ3VycmVuY3k6IHtcclxuICAgIGRlY2ltYWxzOiAxOCxcclxuICAgIG5hbWU6ICdNb25hZCcsXHJcbiAgICBzeW1ib2w6ICdNT04nLFxyXG4gIH0sXHJcbiAgcnBjVXJsczoge1xyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICBodHRwOiBbJ2h0dHBzOi8vdGVzdG5ldC1ycGMubW9uYWQueHl6J10sXHJcbiAgICB9LFxyXG4gICAgcHVibGljOiB7XHJcbiAgICAgIGh0dHA6IFsnaHR0cHM6Ly90ZXN0bmV0LXJwYy5tb25hZC54eXonXSxcclxuICAgIH0sXHJcbiAgfSxcclxuICBibG9ja0V4cGxvcmVyczoge1xyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICBuYW1lOiAnTW9uYWQgRXhwbG9yZXInLFxyXG4gICAgICB1cmw6ICdodHRwczovL2V4cGxvcmVyLm1vbmFkLnh5eicsXHJcbiAgICB9LFxyXG4gIH0sXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBOQVRJVkVfVE9LRU5fQUREUkVTUyA9ICcweEVlZWVlRWVlZUVlRWVlRWVFZUVlZUVFRWVlZWVFZWVlZWVlZUVFZUUnICJdLCJuYW1lcyI6WyJtb25hZFRlc3RuZXQiLCJpZCIsIm5hbWUiLCJuZXR3b3JrIiwibmF0aXZlQ3VycmVuY3kiLCJkZWNpbWFscyIsInN5bWJvbCIsInJwY1VybHMiLCJkZWZhdWx0IiwiaHR0cCIsInB1YmxpYyIsImJsb2NrRXhwbG9yZXJzIiwidXJsIiwiTkFUSVZFX1RPS0VOX0FERFJFU1MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./config/chains.ts\n");

/***/ }),

/***/ "(api)/./config/contracts.ts":
/*!*****************************!*\
  !*** ./config/contracts.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminWallet: () => (/* binding */ adminWallet),\n/* harmony export */   contracts: () => (/* binding */ contracts)\n/* harmony export */ });\nconst contracts = {\n    jikunaSwap: {\n        address: process.env.JIKUNA_SWAP_ADDRESS || \"0x9906c1FbaD6262E72fC3aA1db42A89a3629f93EE\",\n        fromBlock: BigInt(0)\n    },\n    jikunaSwapETH: {\n        address: process.env.JIKUNA_SWAP_ETH_ADDRESS || \"0x0f36AF6f7EA2b7708D756991E1f13ec0Add23998\",\n        fromBlock: BigInt(0)\n    },\n    jikunaXtraPointsV2: {\n        address: process.env.JXP_CONTRACT_ADDRESS || \"0x1b869CEaC99F779e881DbD1354a3582F8bca9Af3\"\n    }\n};\nconst adminWallet = {\n    address: \"0x3E5350732810d539541d5e36DCB9777816E8c934\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25maWcvY29udHJhY3RzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEsWUFBWTtJQUN2QkMsWUFBWTtRQUNWQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLG1CQUFtQixJQUFJO1FBQzVDQyxXQUFXQyxPQUFPO0lBQ3BCO0lBQ0FDLGVBQWU7UUFDYk4sU0FBU0MsUUFBUUMsR0FBRyxDQUFDSyx1QkFBdUIsSUFBSTtRQUNoREgsV0FBV0MsT0FBTztJQUNwQjtJQUNBRyxvQkFBb0I7UUFDbEJSLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ08sb0JBQW9CLElBQUk7SUFDL0M7QUFDRixFQUFDO0FBRU0sTUFBTUMsY0FBYztJQUN6QlYsU0FBUztBQUNYLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vY29uZmlnL2NvbnRyYWN0cy50cz80YjU3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb250cmFjdHMgPSB7XHJcbiAgamlrdW5hU3dhcDoge1xyXG4gICAgYWRkcmVzczogcHJvY2Vzcy5lbnYuSklLVU5BX1NXQVBfQUREUkVTUyB8fCAnMHg5OTA2YzFGYmFENjI2MkU3MmZDM2FBMWRiNDJBODlhMzYyOWY5M0VFJyxcclxuICAgIGZyb21CbG9jazogQmlnSW50KDApLCAvLyBVcGRhdGUgdGhpcyB3aXRoIGFjdHVhbCBkZXBsb3ltZW50IGJsb2NrIGZvciBwcm9kdWN0aW9uXHJcbiAgfSxcclxuICBqaWt1bmFTd2FwRVRIOiB7XHJcbiAgICBhZGRyZXNzOiBwcm9jZXNzLmVudi5KSUtVTkFfU1dBUF9FVEhfQUREUkVTUyB8fCAnMHgwZjM2QUY2ZjdFQTJiNzcwOEQ3NTY5OTFFMWYxM2VjMEFkZDIzOTk4JyxcclxuICAgIGZyb21CbG9jazogQmlnSW50KDApLCAvLyBVcGRhdGUgdGhpcyB3aXRoIGFjdHVhbCBkZXBsb3ltZW50IGJsb2NrIGZvciBwcm9kdWN0aW9uXHJcbiAgfSxcclxuICBqaWt1bmFYdHJhUG9pbnRzVjI6IHtcclxuICAgIGFkZHJlc3M6IHByb2Nlc3MuZW52LkpYUF9DT05UUkFDVF9BRERSRVNTIHx8ICcweDFiODY5Q0VhQzk5Rjc3OWU4ODFEYkQxMzU0YTM1ODJGOGJjYTlBZjMnLFxyXG4gIH0sXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBhZG1pbldhbGxldCA9IHtcclxuICBhZGRyZXNzOiAnMHgzRTUzNTA3MzI4MTBkNTM5NTQxZDVlMzZEQ0I5Nzc3ODE2RThjOTM0JywgLy8gQWRtaW4gd2l0aCBVUERBVEVSIHJvbGVcclxufSAiXSwibmFtZXMiOlsiY29udHJhY3RzIiwiamlrdW5hU3dhcCIsImFkZHJlc3MiLCJwcm9jZXNzIiwiZW52IiwiSklLVU5BX1NXQVBfQUREUkVTUyIsImZyb21CbG9jayIsIkJpZ0ludCIsImppa3VuYVN3YXBFVEgiLCJKSUtVTkFfU1dBUF9FVEhfQUREUkVTUyIsImppa3VuYVh0cmFQb2ludHNWMiIsIkpYUF9DT05UUkFDVF9BRERSRVNTIiwiYWRtaW5XYWxsZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./config/contracts.ts\n");

/***/ }),

/***/ "(api)/./lib/blockchain/contract-interaction.ts":
/*!************************************************!*\
  !*** ./lib/blockchain/contract-interaction.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   batchUpdateJXPOnChain: () => (/* binding */ batchUpdateJXPOnChain),\n/* harmony export */   manuallyAddJXP: () => (/* binding */ manuallyAddJXP)\n/* harmony export */ });\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! viem */ \"viem\");\n/* harmony import */ var viem_accounts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! viem/accounts */ \"viem/accounts\");\n/* harmony import */ var _config_chains__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/config/chains */ \"(api)/./config/chains.ts\");\n/* harmony import */ var _config_contracts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/config/contracts */ \"(api)/./config/contracts.ts\");\n/* harmony import */ var _lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/database/jxp-updates */ \"(api)/./lib/database/jxp-updates.ts\");\n/* harmony import */ var _config_abis_JikunaXtraPointsV2_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/config/abis/JikunaXtraPointsV2.json */ \"(api)/./config/abis/JikunaXtraPointsV2.json\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([viem__WEBPACK_IMPORTED_MODULE_0__, viem_accounts__WEBPACK_IMPORTED_MODULE_1__]);\n([viem__WEBPACK_IMPORTED_MODULE_0__, viem_accounts__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n// Ensure private key is available\nif (!process.env.ADMIN_PRIVATE_KEY) {\n    throw new Error(\"ADMIN_PRIVATE_KEY environment variable is not set\");\n}\n// Create account from private key\nconst account = (0,viem_accounts__WEBPACK_IMPORTED_MODULE_1__.privateKeyToAccount)(`0x${process.env.ADMIN_PRIVATE_KEY}`);\n// Initialize Viem clients\nconst publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_0__.createPublicClient)({\n    chain: (0,viem__WEBPACK_IMPORTED_MODULE_0__.defineChain)(_config_chains__WEBPACK_IMPORTED_MODULE_2__.monadTestnet),\n    transport: (0,viem__WEBPACK_IMPORTED_MODULE_0__.http)(process.env.MONAD_RPC_URL || \"https://testnet-rpc.monad.xyz\")\n});\nconst walletClient = (0,viem__WEBPACK_IMPORTED_MODULE_0__.createWalletClient)({\n    account,\n    chain: (0,viem__WEBPACK_IMPORTED_MODULE_0__.defineChain)(_config_chains__WEBPACK_IMPORTED_MODULE_2__.monadTestnet),\n    transport: (0,viem__WEBPACK_IMPORTED_MODULE_0__.http)(process.env.MONAD_RPC_URL || \"https://testnet-rpc.monad.xyz\")\n});\n// Parse ABI for the JXP contract\nconst jxpContractAbi = _config_abis_JikunaXtraPointsV2_json__WEBPACK_IMPORTED_MODULE_5__;\n/**\r\n * Batch update JXP points on-chain\r\n */ async function batchUpdateJXPOnChain() {\n    try {\n        // Get all pending JXP updates\n        const pendingUpdates = await (0,_lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_4__.getAllPendingJXPUpdates)();\n        if (pendingUpdates.length === 0) {\n            return {\n                success: true,\n                userCount: 0,\n                totalJXP: 0\n            };\n        }\n        // Prepare users and amounts arrays\n        const users = [];\n        const amounts = [];\n        let totalJXP = 0;\n        for (const update of pendingUpdates){\n            users.push(update.user);\n            amounts.push(BigInt(update.pendingJXP));\n            totalJXP += update.pendingJXP;\n        }\n        // Call the updatePoints function\n        const { request } = await publicClient.simulateContract({\n            address: _config_contracts__WEBPACK_IMPORTED_MODULE_3__.contracts.jikunaXtraPointsV2.address,\n            abi: jxpContractAbi,\n            functionName: \"updatePoints\",\n            args: [\n                users,\n                amounts\n            ],\n            account\n        });\n        // Execute the transaction\n        const hash = await walletClient.writeContract(request);\n        // Wait for transaction confirmation\n        const receipt = await publicClient.waitForTransactionReceipt({\n            hash\n        });\n        // Clear pending JXP for these users if transaction was successful\n        if (receipt.status === \"success\") {\n            await (0,_lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_4__.clearPendingJXP)(users);\n        } else {\n            throw new Error(\"Transaction failed\");\n        }\n        return {\n            success: true,\n            transactionHash: hash,\n            userCount: users.length,\n            totalJXP\n        };\n    } catch (error) {\n        console.error(\"Error updating JXP on-chain:\", error);\n        return {\n            success: false,\n            userCount: 0,\n            totalJXP: 0,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n/**\r\n * Manually add JXP for a specific user\r\n */ async function manuallyAddJXP(userAddress, amount) {\n    try {\n        // Prepare arrays with just one user\n        const users = [\n            userAddress\n        ];\n        const amounts = [\n            BigInt(amount)\n        ];\n        // Call the updatePoints function\n        const { request } = await publicClient.simulateContract({\n            address: _config_contracts__WEBPACK_IMPORTED_MODULE_3__.contracts.jikunaXtraPointsV2.address,\n            abi: jxpContractAbi,\n            functionName: \"updatePoints\",\n            args: [\n                users,\n                amounts\n            ],\n            account\n        });\n        // Execute the transaction\n        const hash = await walletClient.writeContract(request);\n        // Wait for transaction confirmation\n        const receipt = await publicClient.waitForTransactionReceipt({\n            hash\n        });\n        return {\n            success: receipt.status === \"success\",\n            transactionHash: hash\n        };\n    } catch (error) {\n        console.error(\"Error manually adding JXP:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYmxvY2tjaGFpbi9jb250cmFjdC1pbnRlcmFjdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEwRjtBQUN2QztBQUNMO0FBQ0E7QUFDdUM7QUFDWjtBQUV6RSxrQ0FBa0M7QUFDbEMsSUFBSSxDQUFDVSxRQUFRQyxHQUFHLENBQUNDLGlCQUFpQixFQUFFO0lBQ2xDLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVBLGtDQUFrQztBQUNsQyxNQUFNQyxVQUFVVixrRUFBbUJBLENBQUMsQ0FBQyxFQUFFLEVBQUVNLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztBQUV4RSwwQkFBMEI7QUFDMUIsTUFBTUcsZUFBZWQsd0RBQWtCQSxDQUFDO0lBQ3RDZSxPQUFPYixpREFBV0EsQ0FBQ0Usd0RBQVlBO0lBQy9CWSxXQUFXZiwwQ0FBSUEsQ0FBQ1EsUUFBUUMsR0FBRyxDQUFDTyxhQUFhLElBQUk7QUFDL0M7QUFFQSxNQUFNQyxlQUFlbkIsd0RBQWtCQSxDQUFDO0lBQ3RDYztJQUNBRSxPQUFPYixpREFBV0EsQ0FBQ0Usd0RBQVlBO0lBQy9CWSxXQUFXZiwwQ0FBSUEsQ0FBQ1EsUUFBUUMsR0FBRyxDQUFDTyxhQUFhLElBQUk7QUFDL0M7QUFFQSxpQ0FBaUM7QUFDakMsTUFBTUUsaUJBQWlCWCxpRUFBcUJBO0FBRTVDOztDQUVDLEdBQ00sZUFBZVk7SUFPcEIsSUFBSTtRQUNGLDhCQUE4QjtRQUM5QixNQUFNQyxpQkFBaUIsTUFBTWYsa0ZBQXVCQTtRQUVwRCxJQUFJZSxlQUFlQyxNQUFNLEtBQUssR0FBRztZQUMvQixPQUFPO2dCQUNMQyxTQUFTO2dCQUNUQyxXQUFXO2dCQUNYQyxVQUFVO1lBQ1o7UUFDRjtRQUVBLG1DQUFtQztRQUNuQyxNQUFNQyxRQUFrQixFQUFFO1FBQzFCLE1BQU1DLFVBQW9CLEVBQUU7UUFDNUIsSUFBSUYsV0FBVztRQUVmLEtBQUssTUFBTUcsVUFBVVAsZUFBZ0I7WUFDbkNLLE1BQU1HLElBQUksQ0FBQ0QsT0FBT0UsSUFBSTtZQUN0QkgsUUFBUUUsSUFBSSxDQUFDRSxPQUFPSCxPQUFPSSxVQUFVO1lBQ3JDUCxZQUFZRyxPQUFPSSxVQUFVO1FBQy9CO1FBRUEsaUNBQWlDO1FBQ2pDLE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUcsTUFBTW5CLGFBQWFvQixnQkFBZ0IsQ0FBQztZQUN0REMsU0FBUzlCLHdEQUFTQSxDQUFDK0Isa0JBQWtCLENBQUNELE9BQU87WUFDN0NFLEtBQUtsQjtZQUNMbUIsY0FBYztZQUNkQyxNQUFNO2dCQUFDYjtnQkFBT0M7YUFBUTtZQUN0QmQ7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQixNQUFNMkIsT0FBTyxNQUFNdEIsYUFBYXVCLGFBQWEsQ0FBQ1I7UUFFOUMsb0NBQW9DO1FBQ3BDLE1BQU1TLFVBQVUsTUFBTTVCLGFBQWE2Qix5QkFBeUIsQ0FBQztZQUFFSDtRQUFLO1FBRXBFLGtFQUFrRTtRQUNsRSxJQUFJRSxRQUFRRSxNQUFNLEtBQUssV0FBVztZQUNoQyxNQUFNckMsMEVBQWVBLENBQUNtQjtRQUN4QixPQUFPO1lBQ0wsTUFBTSxJQUFJZCxNQUFNO1FBQ2xCO1FBRUEsT0FBTztZQUNMVyxTQUFTO1lBQ1RzQixpQkFBaUJMO1lBQ2pCaEIsV0FBV0UsTUFBTUosTUFBTTtZQUN2Qkc7UUFDRjtJQUNGLEVBQUUsT0FBT3FCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBTztZQUNMdkIsU0FBUztZQUNUQyxXQUFXO1lBQ1hDLFVBQVU7WUFDVnFCLE9BQU9BLGlCQUFpQmxDLFFBQVFrQyxNQUFNRSxPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxlQUNwQkMsV0FBbUIsRUFDbkJDLE1BQWM7SUFNZCxJQUFJO1FBQ0Ysb0NBQW9DO1FBQ3BDLE1BQU16QixRQUFRO1lBQUN3QjtTQUFZO1FBQzNCLE1BQU12QixVQUFVO1lBQUNJLE9BQU9vQjtTQUFRO1FBRWhDLGlDQUFpQztRQUNqQyxNQUFNLEVBQUVsQixPQUFPLEVBQUUsR0FBRyxNQUFNbkIsYUFBYW9CLGdCQUFnQixDQUFDO1lBQ3REQyxTQUFTOUIsd0RBQVNBLENBQUMrQixrQkFBa0IsQ0FBQ0QsT0FBTztZQUM3Q0UsS0FBS2xCO1lBQ0xtQixjQUFjO1lBQ2RDLE1BQU07Z0JBQUNiO2dCQUFPQzthQUFRO1lBQ3RCZDtRQUNGO1FBRUEsMEJBQTBCO1FBQzFCLE1BQU0yQixPQUFPLE1BQU10QixhQUFhdUIsYUFBYSxDQUFDUjtRQUU5QyxvQ0FBb0M7UUFDcEMsTUFBTVMsVUFBVSxNQUFNNUIsYUFBYTZCLHlCQUF5QixDQUFDO1lBQUVIO1FBQUs7UUFFcEUsT0FBTztZQUNMakIsU0FBU21CLFFBQVFFLE1BQU0sS0FBSztZQUM1QkMsaUJBQWlCTDtRQUNuQjtJQUNGLEVBQUUsT0FBT00sT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPO1lBQ0x2QixTQUFTO1lBQ1R1QixPQUFPQSxpQkFBaUJsQyxRQUFRa0MsTUFBTUUsT0FBTyxHQUFHO1FBQ2xEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ppa3VuYS1zd2FwLWJhY2tlbmQvLi9saWIvYmxvY2tjaGFpbi9jb250cmFjdC1pbnRlcmFjdGlvbi50cz8zOWEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVdhbGxldENsaWVudCwgY3JlYXRlUHVibGljQ2xpZW50LCBodHRwLCBwYXJzZUFiaSwgZGVmaW5lQ2hhaW4gfSBmcm9tICd2aWVtJ1xyXG5pbXBvcnQgeyBwcml2YXRlS2V5VG9BY2NvdW50IH0gZnJvbSAndmllbS9hY2NvdW50cydcclxuaW1wb3J0IHsgbW9uYWRUZXN0bmV0IH0gZnJvbSAnQC9jb25maWcvY2hhaW5zJ1xyXG5pbXBvcnQgeyBjb250cmFjdHMgfSBmcm9tICdAL2NvbmZpZy9jb250cmFjdHMnXHJcbmltcG9ydCB7IGdldEFsbFBlbmRpbmdKWFBVcGRhdGVzLCBjbGVhclBlbmRpbmdKWFAgfSBmcm9tICdAL2xpYi9kYXRhYmFzZS9qeHAtdXBkYXRlcydcclxuaW1wb3J0IEppa3VuYVh0cmFQb2ludHNWMkFCSSBmcm9tICdAL2NvbmZpZy9hYmlzL0ppa3VuYVh0cmFQb2ludHNWMi5qc29uJ1xyXG5cclxuLy8gRW5zdXJlIHByaXZhdGUga2V5IGlzIGF2YWlsYWJsZVxyXG5pZiAoIXByb2Nlc3MuZW52LkFETUlOX1BSSVZBVEVfS0VZKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdBRE1JTl9QUklWQVRFX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0JylcclxufVxyXG5cclxuLy8gQ3JlYXRlIGFjY291bnQgZnJvbSBwcml2YXRlIGtleVxyXG5jb25zdCBhY2NvdW50ID0gcHJpdmF0ZUtleVRvQWNjb3VudChgMHgke3Byb2Nlc3MuZW52LkFETUlOX1BSSVZBVEVfS0VZfWApXHJcblxyXG4vLyBJbml0aWFsaXplIFZpZW0gY2xpZW50c1xyXG5jb25zdCBwdWJsaWNDbGllbnQgPSBjcmVhdGVQdWJsaWNDbGllbnQoe1xyXG4gIGNoYWluOiBkZWZpbmVDaGFpbihtb25hZFRlc3RuZXQpLFxyXG4gIHRyYW5zcG9ydDogaHR0cChwcm9jZXNzLmVudi5NT05BRF9SUENfVVJMIHx8ICdodHRwczovL3Rlc3RuZXQtcnBjLm1vbmFkLnh5eicpLFxyXG59KVxyXG5cclxuY29uc3Qgd2FsbGV0Q2xpZW50ID0gY3JlYXRlV2FsbGV0Q2xpZW50KHtcclxuICBhY2NvdW50LFxyXG4gIGNoYWluOiBkZWZpbmVDaGFpbihtb25hZFRlc3RuZXQpLFxyXG4gIHRyYW5zcG9ydDogaHR0cChwcm9jZXNzLmVudi5NT05BRF9SUENfVVJMIHx8ICdodHRwczovL3Rlc3RuZXQtcnBjLm1vbmFkLnh5eicpLFxyXG59KVxyXG5cclxuLy8gUGFyc2UgQUJJIGZvciB0aGUgSlhQIGNvbnRyYWN0XHJcbmNvbnN0IGp4cENvbnRyYWN0QWJpID0gSmlrdW5hWHRyYVBvaW50c1YyQUJJXHJcblxyXG4vKipcclxuICogQmF0Y2ggdXBkYXRlIEpYUCBwb2ludHMgb24tY2hhaW5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXRjaFVwZGF0ZUpYUE9uQ2hhaW4oKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICB0cmFuc2FjdGlvbkhhc2g/OiBzdHJpbmc7XHJcbiAgdXNlckNvdW50OiBudW1iZXI7XHJcbiAgdG90YWxKWFA6IG51bWJlcjtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBHZXQgYWxsIHBlbmRpbmcgSlhQIHVwZGF0ZXNcclxuICAgIGNvbnN0IHBlbmRpbmdVcGRhdGVzID0gYXdhaXQgZ2V0QWxsUGVuZGluZ0pYUFVwZGF0ZXMoKVxyXG4gICAgXHJcbiAgICBpZiAocGVuZGluZ1VwZGF0ZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICB1c2VyQ291bnQ6IDAsXHJcbiAgICAgICAgdG90YWxKWFA6IDAsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUHJlcGFyZSB1c2VycyBhbmQgYW1vdW50cyBhcnJheXNcclxuICAgIGNvbnN0IHVzZXJzOiBzdHJpbmdbXSA9IFtdXHJcbiAgICBjb25zdCBhbW91bnRzOiBiaWdpbnRbXSA9IFtdXHJcbiAgICBsZXQgdG90YWxKWFAgPSAwXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHBlbmRpbmdVcGRhdGVzKSB7XHJcbiAgICAgIHVzZXJzLnB1c2godXBkYXRlLnVzZXIpXHJcbiAgICAgIGFtb3VudHMucHVzaChCaWdJbnQodXBkYXRlLnBlbmRpbmdKWFApKVxyXG4gICAgICB0b3RhbEpYUCArPSB1cGRhdGUucGVuZGluZ0pYUFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDYWxsIHRoZSB1cGRhdGVQb2ludHMgZnVuY3Rpb25cclxuICAgIGNvbnN0IHsgcmVxdWVzdCB9ID0gYXdhaXQgcHVibGljQ2xpZW50LnNpbXVsYXRlQ29udHJhY3Qoe1xyXG4gICAgICBhZGRyZXNzOiBjb250cmFjdHMuamlrdW5hWHRyYVBvaW50c1YyLmFkZHJlc3MgYXMgYDB4JHtzdHJpbmd9YCxcclxuICAgICAgYWJpOiBqeHBDb250cmFjdEFiaSxcclxuICAgICAgZnVuY3Rpb25OYW1lOiAndXBkYXRlUG9pbnRzJyxcclxuICAgICAgYXJnczogW3VzZXJzLCBhbW91bnRzXSxcclxuICAgICAgYWNjb3VudCxcclxuICAgIH0pXHJcbiAgICBcclxuICAgIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uXHJcbiAgICBjb25zdCBoYXNoID0gYXdhaXQgd2FsbGV0Q2xpZW50LndyaXRlQ29udHJhY3QocmVxdWVzdClcclxuICAgIFxyXG4gICAgLy8gV2FpdCBmb3IgdHJhbnNhY3Rpb24gY29uZmlybWF0aW9uXHJcbiAgICBjb25zdCByZWNlaXB0ID0gYXdhaXQgcHVibGljQ2xpZW50LndhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQoeyBoYXNoIH0pXHJcbiAgICBcclxuICAgIC8vIENsZWFyIHBlbmRpbmcgSlhQIGZvciB0aGVzZSB1c2VycyBpZiB0cmFuc2FjdGlvbiB3YXMgc3VjY2Vzc2Z1bFxyXG4gICAgaWYgKHJlY2VpcHQuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcclxuICAgICAgYXdhaXQgY2xlYXJQZW5kaW5nSlhQKHVzZXJzKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBmYWlsZWQnKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGhhc2gsXHJcbiAgICAgIHVzZXJDb3VudDogdXNlcnMubGVuZ3RoLFxyXG4gICAgICB0b3RhbEpYUCxcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgSlhQIG9uLWNoYWluOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIHVzZXJDb3VudDogMCxcclxuICAgICAgdG90YWxKWFA6IDAsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYW51YWxseSBhZGQgSlhQIGZvciBhIHNwZWNpZmljIHVzZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYW51YWxseUFkZEpYUChcclxuICB1c2VyQWRkcmVzczogc3RyaW5nLCBcclxuICBhbW91bnQ6IG51bWJlclxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIHRyYW5zYWN0aW9uSGFzaD86IHN0cmluZztcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBQcmVwYXJlIGFycmF5cyB3aXRoIGp1c3Qgb25lIHVzZXJcclxuICAgIGNvbnN0IHVzZXJzID0gW3VzZXJBZGRyZXNzXVxyXG4gICAgY29uc3QgYW1vdW50cyA9IFtCaWdJbnQoYW1vdW50KV1cclxuICAgIFxyXG4gICAgLy8gQ2FsbCB0aGUgdXBkYXRlUG9pbnRzIGZ1bmN0aW9uXHJcbiAgICBjb25zdCB7IHJlcXVlc3QgfSA9IGF3YWl0IHB1YmxpY0NsaWVudC5zaW11bGF0ZUNvbnRyYWN0KHtcclxuICAgICAgYWRkcmVzczogY29udHJhY3RzLmppa3VuYVh0cmFQb2ludHNWMi5hZGRyZXNzIGFzIGAweCR7c3RyaW5nfWAsXHJcbiAgICAgIGFiaToganhwQ29udHJhY3RBYmksXHJcbiAgICAgIGZ1bmN0aW9uTmFtZTogJ3VwZGF0ZVBvaW50cycsXHJcbiAgICAgIGFyZ3M6IFt1c2VycywgYW1vdW50c10sXHJcbiAgICAgIGFjY291bnQsXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICAvLyBFeGVjdXRlIHRoZSB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgaGFzaCA9IGF3YWl0IHdhbGxldENsaWVudC53cml0ZUNvbnRyYWN0KHJlcXVlc3QpXHJcbiAgICBcclxuICAgIC8vIFdhaXQgZm9yIHRyYW5zYWN0aW9uIGNvbmZpcm1hdGlvblxyXG4gICAgY29uc3QgcmVjZWlwdCA9IGF3YWl0IHB1YmxpY0NsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHsgaGFzaCB9KVxyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiByZWNlaXB0LnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnLFxyXG4gICAgICB0cmFuc2FjdGlvbkhhc2g6IGhhc2gsXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1hbnVhbGx5IGFkZGluZyBKWFA6JywgZXJyb3IpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxyXG4gICAgfVxyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiY3JlYXRlV2FsbGV0Q2xpZW50IiwiY3JlYXRlUHVibGljQ2xpZW50IiwiaHR0cCIsImRlZmluZUNoYWluIiwicHJpdmF0ZUtleVRvQWNjb3VudCIsIm1vbmFkVGVzdG5ldCIsImNvbnRyYWN0cyIsImdldEFsbFBlbmRpbmdKWFBVcGRhdGVzIiwiY2xlYXJQZW5kaW5nSlhQIiwiSmlrdW5hWHRyYVBvaW50c1YyQUJJIiwicHJvY2VzcyIsImVudiIsIkFETUlOX1BSSVZBVEVfS0VZIiwiRXJyb3IiLCJhY2NvdW50IiwicHVibGljQ2xpZW50IiwiY2hhaW4iLCJ0cmFuc3BvcnQiLCJNT05BRF9SUENfVVJMIiwid2FsbGV0Q2xpZW50IiwianhwQ29udHJhY3RBYmkiLCJiYXRjaFVwZGF0ZUpYUE9uQ2hhaW4iLCJwZW5kaW5nVXBkYXRlcyIsImxlbmd0aCIsInN1Y2Nlc3MiLCJ1c2VyQ291bnQiLCJ0b3RhbEpYUCIsInVzZXJzIiwiYW1vdW50cyIsInVwZGF0ZSIsInB1c2giLCJ1c2VyIiwiQmlnSW50IiwicGVuZGluZ0pYUCIsInJlcXVlc3QiLCJzaW11bGF0ZUNvbnRyYWN0IiwiYWRkcmVzcyIsImppa3VuYVh0cmFQb2ludHNWMiIsImFiaSIsImZ1bmN0aW9uTmFtZSIsImFyZ3MiLCJoYXNoIiwid3JpdGVDb250cmFjdCIsInJlY2VpcHQiLCJ3YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0Iiwic3RhdHVzIiwidHJhbnNhY3Rpb25IYXNoIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIm1hbnVhbGx5QWRkSlhQIiwidXNlckFkZHJlc3MiLCJhbW91bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/blockchain/contract-interaction.ts\n");

/***/ }),

/***/ "(api)/./lib/blockchain/jxp-calculator.ts":
/*!******************************************!*\
  !*** ./lib/blockchain/jxp-calculator.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   processSwapEventsForJXP: () => (/* binding */ processSwapEventsForJXP)\n/* harmony export */ });\n/* harmony import */ var _lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database/jxp-updates */ \"(api)/./lib/database/jxp-updates.ts\");\n/* harmony import */ var _lib_database_swap_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database/swap-events */ \"(api)/./lib/database/swap-events.ts\");\n/* harmony import */ var _lib_database_system_stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/database/system-stats */ \"(api)/./lib/database/system-stats.ts\");\n\n\n\n/**\r\n * Processes unprocessed swap events, calculates JXP, and updates user records\r\n */ async function processSwapEventsForJXP() {\n    // Get all unprocessed swap events\n    const unprocessedEvents = await (0,_lib_database_swap_events__WEBPACK_IMPORTED_MODULE_1__.getUnprocessedSwapEvents)();\n    if (unprocessedEvents.length === 0) {\n        return {\n            processedCount: 0,\n            totalJXPAwarded: 0,\n            userUpdates: {}\n        };\n    }\n    // Group JXP by user\n    const userJXPUpdates = {};\n    let totalJXPAwarded = 0;\n    for (const event of unprocessedEvents){\n        if (event.calculatedJXP > 0) {\n            const userAddress = event.user.toLowerCase();\n            if (!userJXPUpdates[userAddress]) {\n                userJXPUpdates[userAddress] = 0;\n            }\n            userJXPUpdates[userAddress] += event.calculatedJXP;\n            totalJXPAwarded += event.calculatedJXP;\n        }\n    }\n    // Update JXP for each user in database\n    const userAddresses = Object.keys(userJXPUpdates);\n    for (const userAddress of userAddresses){\n        await (0,_lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_0__.updateUserJXP)(userAddress, userJXPUpdates[userAddress]);\n    }\n    // Mark all events as processed\n    const eventIds = unprocessedEvents.map((event)=>event._id);\n    await (0,_lib_database_swap_events__WEBPACK_IMPORTED_MODULE_1__.markSwapEventsAsProcessed)(eventIds);\n    // Update system stats\n    await (0,_lib_database_system_stats__WEBPACK_IMPORTED_MODULE_2__.updateLastProcessingTime)(totalJXPAwarded, unprocessedEvents.length);\n    return {\n        processedCount: unprocessedEvents.length,\n        totalJXPAwarded,\n        userUpdates: userJXPUpdates\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYmxvY2tjaGFpbi9qeHAtY2FsY3VsYXRvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQzBEO0FBQ3NDO0FBQzFCO0FBRXRFOztDQUVDLEdBQ00sZUFBZUk7SUFLcEIsa0NBQWtDO0lBQ2xDLE1BQU1DLG9CQUFvQixNQUFNSixtRkFBd0JBO0lBRXhELElBQUlJLGtCQUFrQkMsTUFBTSxLQUFLLEdBQUc7UUFDbEMsT0FBTztZQUNMQyxnQkFBZ0I7WUFDaEJDLGlCQUFpQjtZQUNqQkMsYUFBYSxDQUFDO1FBQ2hCO0lBQ0Y7SUFFQSxvQkFBb0I7SUFDcEIsTUFBTUMsaUJBQXlDLENBQUM7SUFDaEQsSUFBSUYsa0JBQWtCO0lBRXRCLEtBQUssTUFBTUcsU0FBU04sa0JBQW1CO1FBQ3JDLElBQUlNLE1BQU1DLGFBQWEsR0FBRyxHQUFHO1lBQzNCLE1BQU1DLGNBQWNGLE1BQU1HLElBQUksQ0FBQ0MsV0FBVztZQUUxQyxJQUFJLENBQUNMLGNBQWMsQ0FBQ0csWUFBWSxFQUFFO2dCQUNoQ0gsY0FBYyxDQUFDRyxZQUFZLEdBQUc7WUFDaEM7WUFFQUgsY0FBYyxDQUFDRyxZQUFZLElBQUlGLE1BQU1DLGFBQWE7WUFDbERKLG1CQUFtQkcsTUFBTUMsYUFBYTtRQUN4QztJQUNGO0lBRUEsdUNBQXVDO0lBQ3ZDLE1BQU1JLGdCQUFnQkMsT0FBT0MsSUFBSSxDQUFDUjtJQUNsQyxLQUFLLE1BQU1HLGVBQWVHLGNBQWU7UUFDdkMsTUFBTWhCLHdFQUFhQSxDQUFDYSxhQUFhSCxjQUFjLENBQUNHLFlBQVk7SUFDOUQ7SUFFQSwrQkFBK0I7SUFDL0IsTUFBTU0sV0FBV2Qsa0JBQWtCZSxHQUFHLENBQUNULENBQUFBLFFBQVNBLE1BQU1VLEdBQUc7SUFDekQsTUFBTW5CLG9GQUF5QkEsQ0FBQ2lCO0lBRWhDLHNCQUFzQjtJQUN0QixNQUFNaEIsb0ZBQXdCQSxDQUFDSyxpQkFBaUJILGtCQUFrQkMsTUFBTTtJQUV4RSxPQUFPO1FBQ0xDLGdCQUFnQkYsa0JBQWtCQyxNQUFNO1FBQ3hDRTtRQUNBQyxhQUFhQztJQUNmO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vbGliL2Jsb2NrY2hhaW4vanhwLWNhbGN1bGF0b3IudHM/OTdlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTd2FwRXZlbnQgfSBmcm9tICdAL3R5cGVzL3N3YXAtZXZlbnQnXHJcbmltcG9ydCB7IHVwZGF0ZVVzZXJKWFAgfSBmcm9tICdAL2xpYi9kYXRhYmFzZS9qeHAtdXBkYXRlcydcclxuaW1wb3J0IHsgZ2V0VW5wcm9jZXNzZWRTd2FwRXZlbnRzLCBtYXJrU3dhcEV2ZW50c0FzUHJvY2Vzc2VkIH0gZnJvbSAnQC9saWIvZGF0YWJhc2Uvc3dhcC1ldmVudHMnXHJcbmltcG9ydCB7IHVwZGF0ZUxhc3RQcm9jZXNzaW5nVGltZSB9IGZyb20gJ0AvbGliL2RhdGFiYXNlL3N5c3RlbS1zdGF0cydcclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzZXMgdW5wcm9jZXNzZWQgc3dhcCBldmVudHMsIGNhbGN1bGF0ZXMgSlhQLCBhbmQgdXBkYXRlcyB1c2VyIHJlY29yZHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzU3dhcEV2ZW50c0ZvckpYUCgpOiBQcm9taXNlPHtcclxuICBwcm9jZXNzZWRDb3VudDogbnVtYmVyO1xyXG4gIHRvdGFsSlhQQXdhcmRlZDogbnVtYmVyO1xyXG4gIHVzZXJVcGRhdGVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xyXG59PiB7XHJcbiAgLy8gR2V0IGFsbCB1bnByb2Nlc3NlZCBzd2FwIGV2ZW50c1xyXG4gIGNvbnN0IHVucHJvY2Vzc2VkRXZlbnRzID0gYXdhaXQgZ2V0VW5wcm9jZXNzZWRTd2FwRXZlbnRzKClcclxuICBcclxuICBpZiAodW5wcm9jZXNzZWRFdmVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcm9jZXNzZWRDb3VudDogMCxcclxuICAgICAgdG90YWxKWFBBd2FyZGVkOiAwLFxyXG4gICAgICB1c2VyVXBkYXRlczoge31cclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gR3JvdXAgSlhQIGJ5IHVzZXJcclxuICBjb25zdCB1c2VySlhQVXBkYXRlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9XHJcbiAgbGV0IHRvdGFsSlhQQXdhcmRlZCA9IDBcclxuICBcclxuICBmb3IgKGNvbnN0IGV2ZW50IG9mIHVucHJvY2Vzc2VkRXZlbnRzKSB7XHJcbiAgICBpZiAoZXZlbnQuY2FsY3VsYXRlZEpYUCA+IDApIHtcclxuICAgICAgY29uc3QgdXNlckFkZHJlc3MgPSBldmVudC51c2VyLnRvTG93ZXJDYXNlKClcclxuICAgICAgXHJcbiAgICAgIGlmICghdXNlckpYUFVwZGF0ZXNbdXNlckFkZHJlc3NdKSB7XHJcbiAgICAgICAgdXNlckpYUFVwZGF0ZXNbdXNlckFkZHJlc3NdID0gMFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB1c2VySlhQVXBkYXRlc1t1c2VyQWRkcmVzc10gKz0gZXZlbnQuY2FsY3VsYXRlZEpYUFxyXG4gICAgICB0b3RhbEpYUEF3YXJkZWQgKz0gZXZlbnQuY2FsY3VsYXRlZEpYUFxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBVcGRhdGUgSlhQIGZvciBlYWNoIHVzZXIgaW4gZGF0YWJhc2VcclxuICBjb25zdCB1c2VyQWRkcmVzc2VzID0gT2JqZWN0LmtleXModXNlckpYUFVwZGF0ZXMpXHJcbiAgZm9yIChjb25zdCB1c2VyQWRkcmVzcyBvZiB1c2VyQWRkcmVzc2VzKSB7XHJcbiAgICBhd2FpdCB1cGRhdGVVc2VySlhQKHVzZXJBZGRyZXNzLCB1c2VySlhQVXBkYXRlc1t1c2VyQWRkcmVzc10pXHJcbiAgfVxyXG4gIFxyXG4gIC8vIE1hcmsgYWxsIGV2ZW50cyBhcyBwcm9jZXNzZWRcclxuICBjb25zdCBldmVudElkcyA9IHVucHJvY2Vzc2VkRXZlbnRzLm1hcChldmVudCA9PiBldmVudC5faWQgYXMgc3RyaW5nKVxyXG4gIGF3YWl0IG1hcmtTd2FwRXZlbnRzQXNQcm9jZXNzZWQoZXZlbnRJZHMpXHJcbiAgXHJcbiAgLy8gVXBkYXRlIHN5c3RlbSBzdGF0c1xyXG4gIGF3YWl0IHVwZGF0ZUxhc3RQcm9jZXNzaW5nVGltZSh0b3RhbEpYUEF3YXJkZWQsIHVucHJvY2Vzc2VkRXZlbnRzLmxlbmd0aClcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgcHJvY2Vzc2VkQ291bnQ6IHVucHJvY2Vzc2VkRXZlbnRzLmxlbmd0aCxcclxuICAgIHRvdGFsSlhQQXdhcmRlZCxcclxuICAgIHVzZXJVcGRhdGVzOiB1c2VySlhQVXBkYXRlc1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsidXBkYXRlVXNlckpYUCIsImdldFVucHJvY2Vzc2VkU3dhcEV2ZW50cyIsIm1hcmtTd2FwRXZlbnRzQXNQcm9jZXNzZWQiLCJ1cGRhdGVMYXN0UHJvY2Vzc2luZ1RpbWUiLCJwcm9jZXNzU3dhcEV2ZW50c0ZvckpYUCIsInVucHJvY2Vzc2VkRXZlbnRzIiwibGVuZ3RoIiwicHJvY2Vzc2VkQ291bnQiLCJ0b3RhbEpYUEF3YXJkZWQiLCJ1c2VyVXBkYXRlcyIsInVzZXJKWFBVcGRhdGVzIiwiZXZlbnQiLCJjYWxjdWxhdGVkSlhQIiwidXNlckFkZHJlc3MiLCJ1c2VyIiwidG9Mb3dlckNhc2UiLCJ1c2VyQWRkcmVzc2VzIiwiT2JqZWN0Iiwia2V5cyIsImV2ZW50SWRzIiwibWFwIiwiX2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/blockchain/jxp-calculator.ts\n");

/***/ }),

/***/ "(api)/./lib/database/jxp-updates.ts":
/*!*************************************!*\
  !*** ./lib/database/jxp-updates.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearPendingJXP: () => (/* binding */ clearPendingJXP),\n/* harmony export */   getAllPendingJXPUpdates: () => (/* binding */ getAllPendingJXPUpdates),\n/* harmony export */   getJXPUpdateByUser: () => (/* binding */ getJXPUpdateByUser),\n/* harmony export */   getTopJXPUsers: () => (/* binding */ getTopJXPUsers),\n/* harmony export */   getTotalPendingJXP: () => (/* binding */ getTotalPendingJXP),\n/* harmony export */   updateUserJXP: () => (/* binding */ updateUserJXP)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(api)/./lib/database/mongodb.ts\");\n\nasync function getJXPUpdateByUser(userAddress) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    return collection.findOne({\n        user: userAddress.toLowerCase()\n    });\n}\nasync function getAllPendingJXPUpdates() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    return collection.find({\n        pendingJXP: {\n            $gt: 0\n        }\n    }).toArray();\n}\nasync function updateUserJXP(userAddress, jxpAmount) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    const user = userAddress.toLowerCase();\n    const now = new Date();\n    await collection.updateOne({\n        user\n    }, {\n        $inc: {\n            pendingJXP: jxpAmount\n        },\n        $set: {\n            lastUpdated: now\n        }\n    }, {\n        upsert: true\n    });\n}\nasync function clearPendingJXP(userAddresses) {\n    if (userAddresses.length === 0) return;\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    const now = new Date();\n    const operations = userAddresses.map((address)=>({\n            updateOne: {\n                filter: {\n                    user: address.toLowerCase()\n                },\n                update: {\n                    $set: {\n                        pendingJXP: 0,\n                        lastUpdated: now\n                    }\n                }\n            }\n        }));\n    await collection.bulkWrite(operations);\n}\nasync function getTotalPendingJXP() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    const result = await collection.aggregate([\n        {\n            $group: {\n                _id: null,\n                total: {\n                    $sum: \"$pendingJXP\"\n                }\n            }\n        }\n    ]).toArray();\n    return result.length > 0 ? result[0].total : 0;\n}\nasync function getTopJXPUsers(limit = 10) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    return collection.find().sort({\n        pendingJXP: -1\n    }).limit(limit).toArray();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UvanhwLXVwZGF0ZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFtRDtBQUc1QyxlQUFlQyxtQkFBbUJDLFdBQW1CO0lBQzFELE1BQU1DLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxPQUFPRyxXQUFXQyxPQUFPLENBQUM7UUFBRUMsTUFBTUgsWUFBWUksV0FBVztJQUFHO0FBQzlEO0FBRU8sZUFBZUM7SUFDcEIsTUFBTUosYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE9BQU9HLFdBQVdLLElBQUksQ0FBQztRQUFFQyxZQUFZO1lBQUVDLEtBQUs7UUFBRTtJQUFFLEdBQUdDLE9BQU87QUFDNUQ7QUFFTyxlQUFlQyxjQUFjVixXQUFtQixFQUFFVyxTQUFpQjtJQUN4RSxNQUFNVixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsTUFBTUssT0FBT0gsWUFBWUksV0FBVztJQUNwQyxNQUFNUSxNQUFNLElBQUlDO0lBRWhCLE1BQU1aLFdBQVdhLFNBQVMsQ0FDeEI7UUFBRVg7SUFBSyxHQUNQO1FBQ0VZLE1BQU07WUFBRVIsWUFBWUk7UUFBVTtRQUM5QkssTUFBTTtZQUFFQyxhQUFhTDtRQUFJO0lBQzNCLEdBQ0E7UUFBRU0sUUFBUTtJQUFLO0FBRW5CO0FBRU8sZUFBZUMsZ0JBQWdCQyxhQUF1QjtJQUMzRCxJQUFJQSxjQUFjQyxNQUFNLEtBQUssR0FBRztJQUVoQyxNQUFNcEIsYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE1BQU1jLE1BQU0sSUFBSUM7SUFFaEIsTUFBTVMsYUFBYUYsY0FBY0csR0FBRyxDQUFDQyxDQUFBQSxVQUFZO1lBQy9DVixXQUFXO2dCQUNUVyxRQUFRO29CQUFFdEIsTUFBTXFCLFFBQVFwQixXQUFXO2dCQUFHO2dCQUN0Q3NCLFFBQVE7b0JBQUVWLE1BQU07d0JBQUVULFlBQVk7d0JBQUdVLGFBQWFMO29CQUFJO2dCQUFFO1lBQ3REO1FBQ0Y7SUFFQSxNQUFNWCxXQUFXMEIsU0FBUyxDQUFDTDtBQUM3QjtBQUVPLGVBQWVNO0lBQ3BCLE1BQU0zQixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsTUFBTStCLFNBQVMsTUFBTTVCLFdBQVc2QixTQUFTLENBQUM7UUFDeEM7WUFBRUMsUUFBUTtnQkFBRUMsS0FBSztnQkFBTUMsT0FBTztvQkFBRUMsTUFBTTtnQkFBYztZQUFFO1FBQUU7S0FDekQsRUFBRXpCLE9BQU87SUFFVixPQUFPb0IsT0FBT1IsTUFBTSxHQUFHLElBQUlRLE1BQU0sQ0FBQyxFQUFFLENBQUNJLEtBQUssR0FBRztBQUMvQztBQUVPLGVBQWVFLGVBQWVDLFFBQWdCLEVBQUU7SUFDckQsTUFBTW5DLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxPQUFPRyxXQUNKSyxJQUFJLEdBQ0orQixJQUFJLENBQUM7UUFBRTlCLFlBQVksQ0FBQztJQUFFLEdBQ3RCNkIsS0FBSyxDQUFDQSxPQUNOM0IsT0FBTztBQUNaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2xpYi9kYXRhYmFzZS9qeHAtdXBkYXRlcy50cz84M2JiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uIH0gZnJvbSAnLi9tb25nb2RiJ1xyXG5pbXBvcnQgeyBKWFBVcGRhdGUgfSBmcm9tICdAL3R5cGVzL2p4cC11cGRhdGUnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SlhQVXBkYXRlQnlVc2VyKHVzZXJBZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPEpYUFVwZGF0ZSB8IG51bGw+IHtcclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0SlhQVXBkYXRlc0NvbGxlY3Rpb24oKVxyXG4gIHJldHVybiBjb2xsZWN0aW9uLmZpbmRPbmUoeyB1c2VyOiB1c2VyQWRkcmVzcy50b0xvd2VyQ2FzZSgpIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxQZW5kaW5nSlhQVXBkYXRlcygpOiBQcm9taXNlPEpYUFVwZGF0ZVtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5maW5kKHsgcGVuZGluZ0pYUDogeyAkZ3Q6IDAgfSB9KS50b0FycmF5KClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJKWFAodXNlckFkZHJlc3M6IHN0cmluZywganhwQW1vdW50OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0SlhQVXBkYXRlc0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IHVzZXIgPSB1c2VyQWRkcmVzcy50b0xvd2VyQ2FzZSgpXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG5cclxuICBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShcclxuICAgIHsgdXNlciB9LFxyXG4gICAgeyBcclxuICAgICAgJGluYzogeyBwZW5kaW5nSlhQOiBqeHBBbW91bnQgfSxcclxuICAgICAgJHNldDogeyBsYXN0VXBkYXRlZDogbm93IH1cclxuICAgIH0sXHJcbiAgICB7IHVwc2VydDogdHJ1ZSB9XHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJQZW5kaW5nSlhQKHVzZXJBZGRyZXNzZXM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgaWYgKHVzZXJBZGRyZXNzZXMubGVuZ3RoID09PSAwKSByZXR1cm5cclxuICBcclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0SlhQVXBkYXRlc0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBcclxuICBjb25zdCBvcGVyYXRpb25zID0gdXNlckFkZHJlc3Nlcy5tYXAoYWRkcmVzcyA9PiAoe1xyXG4gICAgdXBkYXRlT25lOiB7XHJcbiAgICAgIGZpbHRlcjogeyB1c2VyOiBhZGRyZXNzLnRvTG93ZXJDYXNlKCkgfSxcclxuICAgICAgdXBkYXRlOiB7ICRzZXQ6IHsgcGVuZGluZ0pYUDogMCwgbGFzdFVwZGF0ZWQ6IG5vdyB9IH1cclxuICAgIH1cclxuICB9KSlcclxuICBcclxuICBhd2FpdCBjb2xsZWN0aW9uLmJ1bGtXcml0ZShvcGVyYXRpb25zKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxQZW5kaW5nSlhQKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKClcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmFnZ3JlZ2F0ZShbXHJcbiAgICB7ICRncm91cDogeyBfaWQ6IG51bGwsIHRvdGFsOiB7ICRzdW06ICckcGVuZGluZ0pYUCcgfSB9IH1cclxuICBdKS50b0FycmF5KClcclxuICBcclxuICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHRbMF0udG90YWwgOiAwXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3BKWFBVc2VycyhsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPEpYUFVwZGF0ZVtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvblxyXG4gICAgLmZpbmQoKVxyXG4gICAgLnNvcnQoeyBwZW5kaW5nSlhQOiAtMSB9KVxyXG4gICAgLmxpbWl0KGxpbWl0KVxyXG4gICAgLnRvQXJyYXkoKVxyXG59ICJdLCJuYW1lcyI6WyJnZXRKWFBVcGRhdGVzQ29sbGVjdGlvbiIsImdldEpYUFVwZGF0ZUJ5VXNlciIsInVzZXJBZGRyZXNzIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJ1c2VyIiwidG9Mb3dlckNhc2UiLCJnZXRBbGxQZW5kaW5nSlhQVXBkYXRlcyIsImZpbmQiLCJwZW5kaW5nSlhQIiwiJGd0IiwidG9BcnJheSIsInVwZGF0ZVVzZXJKWFAiLCJqeHBBbW91bnQiLCJub3ciLCJEYXRlIiwidXBkYXRlT25lIiwiJGluYyIsIiRzZXQiLCJsYXN0VXBkYXRlZCIsInVwc2VydCIsImNsZWFyUGVuZGluZ0pYUCIsInVzZXJBZGRyZXNzZXMiLCJsZW5ndGgiLCJvcGVyYXRpb25zIiwibWFwIiwiYWRkcmVzcyIsImZpbHRlciIsInVwZGF0ZSIsImJ1bGtXcml0ZSIsImdldFRvdGFsUGVuZGluZ0pYUCIsInJlc3VsdCIsImFnZ3JlZ2F0ZSIsIiRncm91cCIsIl9pZCIsInRvdGFsIiwiJHN1bSIsImdldFRvcEpYUFVzZXJzIiwibGltaXQiLCJzb3J0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/jxp-updates.ts\n");

/***/ }),

/***/ "(api)/./lib/database/mongodb.ts":
/*!*********************************!*\
  !*** ./lib/database/mongodb.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientPromise: () => (/* binding */ clientPromise),\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   getJXPUpdatesCollection: () => (/* binding */ getJXPUpdatesCollection),\n/* harmony export */   getSwapEventsCollection: () => (/* binding */ getSwapEventsCollection),\n/* harmony export */   getSystemStatsCollection: () => (/* binding */ getSystemStatsCollection)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nlet db;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    let globalWithMongo = global;\n    if (!globalWithMongo._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        globalWithMongo._mongoClientPromise = client.connect();\n    }\n    // Pastikan clientPromise tidak undefined\n    clientPromise = globalWithMongo._mongoClientPromise;\n} else {}\nasync function getDb() {\n    if (!db) {\n        const connectedClient = await clientPromise;\n        db = connectedClient.db(\"jikuna-jxp\");\n    }\n    return db;\n}\nasync function getSwapEventsCollection() {\n    const db = await getDb();\n    return db.collection(\"swapEvents\");\n}\nasync function getJXPUpdatesCollection() {\n    const db = await getDb();\n    return db.collection(\"jxpUpdates\");\n}\nasync function getSystemStatsCollection() {\n    const db = await getDb();\n    return db.collection(\"systemStats\");\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBSXJELElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLEVBQUU7SUFDNUIsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsTUFBTUMsTUFBTUosUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0FBQ25DLE1BQU1HLFVBQVUsQ0FBQztBQUVqQixJQUFJQztBQUNKLElBQUlDO0FBQ0osSUFBSUM7QUFFSixJQUFJUixJQUF5QixFQUFlO0lBQzFDLCtEQUErRDtJQUMvRCw2RUFBNkU7SUFDN0UsSUFBSVMsa0JBQWtCQztJQUl0QixJQUFJLENBQUNELGdCQUFnQkUsbUJBQW1CLEVBQUU7UUFDeENMLFNBQVMsSUFBSVAsZ0RBQVdBLENBQUNLLEtBQUtDO1FBQzlCSSxnQkFBZ0JFLG1CQUFtQixHQUFHTCxPQUFPTSxPQUFPO0lBQ3REO0lBQ0EseUNBQXlDO0lBQ3pDTCxnQkFBZ0JFLGdCQUFnQkUsbUJBQW1CO0FBQ3JELE9BQU8sRUFJTjtBQUVNLGVBQWVFO0lBQ3BCLElBQUksQ0FBQ0wsSUFBSTtRQUNQLE1BQU1NLGtCQUFrQixNQUFNUDtRQUM5QkMsS0FBS00sZ0JBQWdCTixFQUFFLENBQUM7SUFDMUI7SUFDQSxPQUFPQTtBQUNUO0FBRU8sZUFBZU87SUFDcEIsTUFBTVAsS0FBSyxNQUFNSztJQUNqQixPQUFPTCxHQUFHUSxVQUFVLENBQVk7QUFDbEM7QUFFTyxlQUFlQztJQUNwQixNQUFNVCxLQUFLLE1BQU1LO0lBQ2pCLE9BQU9MLEdBQUdRLFVBQVUsQ0FBWTtBQUNsQztBQUVPLGVBQWVFO0lBQ3BCLE1BQU1WLEtBQUssTUFBTUs7SUFDakIsT0FBT0wsR0FBR1EsVUFBVSxDQUFjO0FBQ3BDO0FBRXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2xpYi9kYXRhYmFzZS9tb25nb2RiLnRzPzhiNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIERiLCBDb2xsZWN0aW9uIH0gZnJvbSAnbW9uZ29kYidcclxuaW1wb3J0IHsgU3dhcEV2ZW50IH0gZnJvbSAnQC90eXBlcy9zd2FwLWV2ZW50J1xyXG5pbXBvcnQgeyBKWFBVcGRhdGUsIFN5c3RlbVN0YXRzIH0gZnJvbSAnQC90eXBlcy9qeHAtdXBkYXRlJ1xyXG5cclxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUnKVxyXG59XHJcblxyXG5jb25zdCB1cmkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSVxyXG5jb25zdCBvcHRpb25zID0ge31cclxuXHJcbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50XHJcbmxldCBjbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PlxyXG5sZXQgZGI6IERiXHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcclxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxyXG4gIGxldCBnbG9iYWxXaXRoTW9uZ28gPSBnbG9iYWwgYXMgdHlwZW9mIGdsb2JhbFRoaXMgJiB7XHJcbiAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD5cclxuICB9XHJcblxyXG4gIGlmICghZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXHJcbiAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcclxuICB9XHJcbiAgLy8gUGFzdGlrYW4gY2xpZW50UHJvbWlzZSB0aWRhayB1bmRlZmluZWRcclxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UgYXMgUHJvbWlzZTxNb25nb0NsaWVudD5cclxufSBlbHNlIHtcclxuICAvLyBJbiBwcm9kdWN0aW9uIG1vZGUsIGl0J3MgYmVzdCB0byBub3QgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlLlxyXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXHJcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERiKCk6IFByb21pc2U8RGI+IHtcclxuICBpZiAoIWRiKSB7XHJcbiAgICBjb25zdCBjb25uZWN0ZWRDbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlXHJcbiAgICBkYiA9IGNvbm5lY3RlZENsaWVudC5kYignamlrdW5hLWp4cCcpXHJcbiAgfVxyXG4gIHJldHVybiBkYlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3dhcEV2ZW50c0NvbGxlY3Rpb24oKTogUHJvbWlzZTxDb2xsZWN0aW9uPFN3YXBFdmVudD4+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IGdldERiKClcclxuICByZXR1cm4gZGIuY29sbGVjdGlvbjxTd2FwRXZlbnQ+KCdzd2FwRXZlbnRzJylcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKCk6IFByb21pc2U8Q29sbGVjdGlvbjxKWFBVcGRhdGU+PiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpXHJcbiAgcmV0dXJuIGRiLmNvbGxlY3Rpb248SlhQVXBkYXRlPignanhwVXBkYXRlcycpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24oKTogUHJvbWlzZTxDb2xsZWN0aW9uPFN5c3RlbVN0YXRzPj4ge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGIoKVxyXG4gIHJldHVybiBkYi5jb2xsZWN0aW9uPFN5c3RlbVN0YXRzPignc3lzdGVtU3RhdHMnKVxyXG59XHJcblxyXG5leHBvcnQgeyBjbGllbnRQcm9taXNlIH0gIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJ1cmkiLCJvcHRpb25zIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsImRiIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJnZXREYiIsImNvbm5lY3RlZENsaWVudCIsImdldFN3YXBFdmVudHNDb2xsZWN0aW9uIiwiY29sbGVjdGlvbiIsImdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uIiwiZ2V0U3lzdGVtU3RhdHNDb2xsZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/mongodb.ts\n");

/***/ }),

/***/ "(api)/./lib/database/swap-events.ts":
/*!*************************************!*\
  !*** ./lib/database/swap-events.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRecentSwapEvents: () => (/* binding */ getRecentSwapEvents),\n/* harmony export */   getSwapEventByTxHash: () => (/* binding */ getSwapEventByTxHash),\n/* harmony export */   getTotalProcessedSwaps: () => (/* binding */ getTotalProcessedSwaps),\n/* harmony export */   getUnprocessedSwapEvents: () => (/* binding */ getUnprocessedSwapEvents),\n/* harmony export */   markSwapEventsAsProcessed: () => (/* binding */ markSwapEventsAsProcessed),\n/* harmony export */   saveSwapEvent: () => (/* binding */ saveSwapEvent),\n/* harmony export */   saveSwapEvents: () => (/* binding */ saveSwapEvents)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(api)/./lib/database/mongodb.ts\");\n\nasync function saveSwapEvent(swapEvent) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    await collection.insertOne(swapEvent);\n}\nasync function saveSwapEvents(swapEvents) {\n    if (swapEvents.length === 0) return;\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    await collection.insertMany(swapEvents);\n}\nasync function getUnprocessedSwapEvents() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.find({\n        processed: false\n    }).toArray();\n}\nasync function markSwapEventsAsProcessed(swapEventIds) {\n    if (swapEventIds.length === 0) return;\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    const now = new Date();\n    await collection.updateMany({\n        _id: {\n            $in: swapEventIds\n        }\n    }, {\n        $set: {\n            processed: true,\n            processedAt: now\n        }\n    });\n}\nasync function getSwapEventByTxHash(txHash) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.findOne({\n        txHash\n    });\n}\nasync function getTotalProcessedSwaps() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.countDocuments({\n        processed: true\n    });\n}\nasync function getRecentSwapEvents(limit = 10) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.find().sort({\n        timestamp: -1\n    }).limit(limit).toArray();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Uvc3dhcC1ldmVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBbUQ7QUFHNUMsZUFBZUMsY0FBY0MsU0FBb0I7SUFDdEQsTUFBTUMsYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE1BQU1HLFdBQVdDLFNBQVMsQ0FBQ0Y7QUFDN0I7QUFFTyxlQUFlRyxlQUFlQyxVQUF1QjtJQUMxRCxJQUFJQSxXQUFXQyxNQUFNLEtBQUssR0FBRztJQUM3QixNQUFNSixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsTUFBTUcsV0FBV0ssVUFBVSxDQUFDRjtBQUM5QjtBQUVPLGVBQWVHO0lBQ3BCLE1BQU1OLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxPQUFPRyxXQUFXTyxJQUFJLENBQUM7UUFBRUMsV0FBVztJQUFNLEdBQUdDLE9BQU87QUFDdEQ7QUFFTyxlQUFlQywwQkFBMEJDLFlBQXNCO0lBQ3BFLElBQUlBLGFBQWFQLE1BQU0sS0FBSyxHQUFHO0lBQy9CLE1BQU1KLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxNQUFNZSxNQUFNLElBQUlDO0lBRWhCLE1BQU1iLFdBQVdjLFVBQVUsQ0FDekI7UUFBRUMsS0FBSztZQUFFQyxLQUFLTDtRQUFhO0lBQUUsR0FDN0I7UUFBRU0sTUFBTTtZQUFFVCxXQUFXO1lBQU1VLGFBQWFOO1FBQUk7SUFBRTtBQUVsRDtBQUVPLGVBQWVPLHFCQUFxQkMsTUFBYztJQUN2RCxNQUFNcEIsYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE9BQU9HLFdBQVdxQixPQUFPLENBQUM7UUFBRUQ7SUFBTztBQUNyQztBQUVPLGVBQWVFO0lBQ3BCLE1BQU10QixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsT0FBT0csV0FBV3VCLGNBQWMsQ0FBQztRQUFFZixXQUFXO0lBQUs7QUFDckQ7QUFFTyxlQUFlZ0Isb0JBQW9CQyxRQUFnQixFQUFFO0lBQzFELE1BQU16QixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsT0FBT0csV0FDSk8sSUFBSSxHQUNKbUIsSUFBSSxDQUFDO1FBQUVDLFdBQVcsQ0FBQztJQUFFLEdBQ3JCRixLQUFLLENBQUNBLE9BQ05oQixPQUFPO0FBQ1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vbGliL2RhdGFiYXNlL3N3YXAtZXZlbnRzLnRzPzZiM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U3dhcEV2ZW50c0NvbGxlY3Rpb24gfSBmcm9tICcuL21vbmdvZGInXHJcbmltcG9ydCB7IFN3YXBFdmVudCB9IGZyb20gJ0AvdHlwZXMvc3dhcC1ldmVudCdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3dhcEV2ZW50KHN3YXBFdmVudDogU3dhcEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE9uZShzd2FwRXZlbnQpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3dhcEV2ZW50cyhzd2FwRXZlbnRzOiBTd2FwRXZlbnRbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGlmIChzd2FwRXZlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE1hbnkoc3dhcEV2ZW50cylcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVucHJvY2Vzc2VkU3dhcEV2ZW50cygpOiBQcm9taXNlPFN3YXBFdmVudFtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5maW5kKHsgcHJvY2Vzc2VkOiBmYWxzZSB9KS50b0FycmF5KClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcmtTd2FwRXZlbnRzQXNQcm9jZXNzZWQoc3dhcEV2ZW50SWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGlmIChzd2FwRXZlbnRJZHMubGVuZ3RoID09PSAwKSByZXR1cm5cclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0U3dhcEV2ZW50c0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBcclxuICBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU1hbnkoXHJcbiAgICB7IF9pZDogeyAkaW46IHN3YXBFdmVudElkcyB9IH0sXHJcbiAgICB7ICRzZXQ6IHsgcHJvY2Vzc2VkOiB0cnVlLCBwcm9jZXNzZWRBdDogbm93IH0gfVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN3YXBFdmVudEJ5VHhIYXNoKHR4SGFzaDogc3RyaW5nKTogUHJvbWlzZTxTd2FwRXZlbnQgfCBudWxsPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5maW5kT25lKHsgdHhIYXNoIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3RhbFByb2Nlc3NlZFN3YXBzKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5jb3VudERvY3VtZW50cyh7IHByb2Nlc3NlZDogdHJ1ZSB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVjZW50U3dhcEV2ZW50cyhsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPFN3YXBFdmVudFtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvblxyXG4gICAgLmZpbmQoKVxyXG4gICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXHJcbiAgICAubGltaXQobGltaXQpXHJcbiAgICAudG9BcnJheSgpXHJcbn0gIl0sIm5hbWVzIjpbImdldFN3YXBFdmVudHNDb2xsZWN0aW9uIiwic2F2ZVN3YXBFdmVudCIsInN3YXBFdmVudCIsImNvbGxlY3Rpb24iLCJpbnNlcnRPbmUiLCJzYXZlU3dhcEV2ZW50cyIsInN3YXBFdmVudHMiLCJsZW5ndGgiLCJpbnNlcnRNYW55IiwiZ2V0VW5wcm9jZXNzZWRTd2FwRXZlbnRzIiwiZmluZCIsInByb2Nlc3NlZCIsInRvQXJyYXkiLCJtYXJrU3dhcEV2ZW50c0FzUHJvY2Vzc2VkIiwic3dhcEV2ZW50SWRzIiwibm93IiwiRGF0ZSIsInVwZGF0ZU1hbnkiLCJfaWQiLCIkaW4iLCIkc2V0IiwicHJvY2Vzc2VkQXQiLCJnZXRTd2FwRXZlbnRCeVR4SGFzaCIsInR4SGFzaCIsImZpbmRPbmUiLCJnZXRUb3RhbFByb2Nlc3NlZFN3YXBzIiwiY291bnREb2N1bWVudHMiLCJnZXRSZWNlbnRTd2FwRXZlbnRzIiwibGltaXQiLCJzb3J0IiwidGltZXN0YW1wIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/swap-events.ts\n");

/***/ }),

/***/ "(api)/./lib/database/system-stats.ts":
/*!**************************************!*\
  !*** ./lib/database/system-stats.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOrCreateSystemStats: () => (/* binding */ getOrCreateSystemStats),\n/* harmony export */   getSystemStats: () => (/* binding */ getSystemStats),\n/* harmony export */   initializeSystemStats: () => (/* binding */ initializeSystemStats),\n/* harmony export */   updateLastProcessingTime: () => (/* binding */ updateLastProcessingTime)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(api)/./lib/database/mongodb.ts\");\n/* harmony import */ var _barrel_optimize_names_addHours_date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=addHours!=!date-fns */ \"(api)/__barrel_optimize__?names=addHours!=!./node_modules/date-fns/index.mjs\");\n\n\nconst GLOBAL_STATS_ID = \"global\";\nconst UPDATE_INTERVAL_HOURS = Number(process.env.UPDATE_INTERVAL_HOURS || 6);\nasync function getSystemStats() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSystemStatsCollection)();\n    return collection.findOne({\n        _id: GLOBAL_STATS_ID\n    });\n}\nasync function initializeSystemStats() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSystemStatsCollection)();\n    const now = new Date();\n    const nextUpdate = (0,_barrel_optimize_names_addHours_date_fns__WEBPACK_IMPORTED_MODULE_1__.addHours)(now, UPDATE_INTERVAL_HOURS);\n    const stats = {\n        _id: GLOBAL_STATS_ID,\n        lastUpdateTime: now,\n        nextScheduledUpdate: nextUpdate,\n        totalProcessedSwaps: 0,\n        totalJXPAwarded: 0\n    };\n    await collection.updateOne({\n        _id: GLOBAL_STATS_ID\n    }, {\n        $set: stats\n    }, {\n        upsert: true\n    });\n    return stats;\n}\nasync function updateLastProcessingTime(jxpAwarded, processedSwaps) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSystemStatsCollection)();\n    const now = new Date();\n    const nextUpdate = (0,_barrel_optimize_names_addHours_date_fns__WEBPACK_IMPORTED_MODULE_1__.addHours)(now, UPDATE_INTERVAL_HOURS);\n    await collection.updateOne({\n        _id: GLOBAL_STATS_ID\n    }, {\n        $set: {\n            lastUpdateTime: now,\n            nextScheduledUpdate: nextUpdate\n        },\n        $inc: {\n            totalJXPAwarded: jxpAwarded,\n            totalProcessedSwaps: processedSwaps\n        }\n    }, {\n        upsert: true\n    });\n}\nasync function getOrCreateSystemStats() {\n    const stats = await getSystemStats();\n    if (stats) return stats;\n    return initializeSystemStats();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Uvc3lzdGVtLXN0YXRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvRDtBQUVqQjtBQUVuQyxNQUFNRSxrQkFBa0I7QUFDeEIsTUFBTUMsd0JBQXdCQyxPQUFPQyxRQUFRQyxHQUFHLENBQUNILHFCQUFxQixJQUFJO0FBRW5FLGVBQWVJO0lBQ3BCLE1BQU1DLGFBQWEsTUFBTVIsa0VBQXdCQTtJQUNqRCxPQUFPUSxXQUFXQyxPQUFPLENBQUM7UUFBRUMsS0FBS1I7SUFBZ0I7QUFDbkQ7QUFFTyxlQUFlUztJQUNwQixNQUFNSCxhQUFhLE1BQU1SLGtFQUF3QkE7SUFDakQsTUFBTVksTUFBTSxJQUFJQztJQUNoQixNQUFNQyxhQUFhYixrRkFBUUEsQ0FBQ1csS0FBS1Q7SUFFakMsTUFBTVksUUFBcUI7UUFDekJMLEtBQUtSO1FBQ0xjLGdCQUFnQko7UUFDaEJLLHFCQUFxQkg7UUFDckJJLHFCQUFxQjtRQUNyQkMsaUJBQWlCO0lBQ25CO0lBRUEsTUFBTVgsV0FBV1ksU0FBUyxDQUN4QjtRQUFFVixLQUFLUjtJQUFnQixHQUN2QjtRQUFFbUIsTUFBTU47SUFBTSxHQUNkO1FBQUVPLFFBQVE7SUFBSztJQUdqQixPQUFPUDtBQUNUO0FBRU8sZUFBZVEseUJBQXlCQyxVQUFrQixFQUFFQyxjQUFzQjtJQUN2RixNQUFNakIsYUFBYSxNQUFNUixrRUFBd0JBO0lBQ2pELE1BQU1ZLE1BQU0sSUFBSUM7SUFDaEIsTUFBTUMsYUFBYWIsa0ZBQVFBLENBQUNXLEtBQUtUO0lBRWpDLE1BQU1LLFdBQVdZLFNBQVMsQ0FDeEI7UUFBRVYsS0FBS1I7SUFBZ0IsR0FDdkI7UUFDRW1CLE1BQU07WUFDSkwsZ0JBQWdCSjtZQUNoQksscUJBQXFCSDtRQUN2QjtRQUNBWSxNQUFNO1lBQ0pQLGlCQUFpQks7WUFDakJOLHFCQUFxQk87UUFDdkI7SUFDRixHQUNBO1FBQUVILFFBQVE7SUFBSztBQUVuQjtBQUVPLGVBQWVLO0lBQ3BCLE1BQU1aLFFBQVEsTUFBTVI7SUFDcEIsSUFBSVEsT0FBTyxPQUFPQTtJQUNsQixPQUFPSjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2xpYi9kYXRhYmFzZS9zeXN0ZW0tc3RhdHMudHM/OGZhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24gfSBmcm9tICcuL21vbmdvZGInXHJcbmltcG9ydCB7IFN5c3RlbVN0YXRzIH0gZnJvbSAnQC90eXBlcy9qeHAtdXBkYXRlJ1xyXG5pbXBvcnQgeyBhZGRIb3VycyB9IGZyb20gJ2RhdGUtZm5zJ1xyXG5cclxuY29uc3QgR0xPQkFMX1NUQVRTX0lEID0gJ2dsb2JhbCdcclxuY29uc3QgVVBEQVRFX0lOVEVSVkFMX0hPVVJTID0gTnVtYmVyKHByb2Nlc3MuZW52LlVQREFURV9JTlRFUlZBTF9IT1VSUyB8fCA2KVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN5c3RlbVN0YXRzKCk6IFByb21pc2U8U3lzdGVtU3RhdHMgfCBudWxsPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN5c3RlbVN0YXRzQ29sbGVjdGlvbigpXHJcbiAgcmV0dXJuIGNvbGxlY3Rpb24uZmluZE9uZSh7IF9pZDogR0xPQkFMX1NUQVRTX0lEIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU3lzdGVtU3RhdHMoKTogUHJvbWlzZTxTeXN0ZW1TdGF0cz4ge1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBjb25zdCBuZXh0VXBkYXRlID0gYWRkSG91cnMobm93LCBVUERBVEVfSU5URVJWQUxfSE9VUlMpXHJcbiAgXHJcbiAgY29uc3Qgc3RhdHM6IFN5c3RlbVN0YXRzID0ge1xyXG4gICAgX2lkOiBHTE9CQUxfU1RBVFNfSUQsXHJcbiAgICBsYXN0VXBkYXRlVGltZTogbm93LFxyXG4gICAgbmV4dFNjaGVkdWxlZFVwZGF0ZTogbmV4dFVwZGF0ZSxcclxuICAgIHRvdGFsUHJvY2Vzc2VkU3dhcHM6IDAsXHJcbiAgICB0b3RhbEpYUEF3YXJkZWQ6IDBcclxuICB9XHJcbiAgXHJcbiAgYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICB7IF9pZDogR0xPQkFMX1NUQVRTX0lEIH0sXHJcbiAgICB7ICRzZXQ6IHN0YXRzIH0sXHJcbiAgICB7IHVwc2VydDogdHJ1ZSB9XHJcbiAgKVxyXG4gIFxyXG4gIHJldHVybiBzdGF0c1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTGFzdFByb2Nlc3NpbmdUaW1lKGp4cEF3YXJkZWQ6IG51bWJlciwgcHJvY2Vzc2VkU3dhcHM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBjb25zdCBuZXh0VXBkYXRlID0gYWRkSG91cnMobm93LCBVUERBVEVfSU5URVJWQUxfSE9VUlMpXHJcbiAgXHJcbiAgYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICB7IF9pZDogR0xPQkFMX1NUQVRTX0lEIH0sXHJcbiAgICB7IFxyXG4gICAgICAkc2V0OiB7XHJcbiAgICAgICAgbGFzdFVwZGF0ZVRpbWU6IG5vdyxcclxuICAgICAgICBuZXh0U2NoZWR1bGVkVXBkYXRlOiBuZXh0VXBkYXRlXHJcbiAgICAgIH0sXHJcbiAgICAgICRpbmM6IHtcclxuICAgICAgICB0b3RhbEpYUEF3YXJkZWQ6IGp4cEF3YXJkZWQsXHJcbiAgICAgICAgdG90YWxQcm9jZXNzZWRTd2FwczogcHJvY2Vzc2VkU3dhcHNcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHsgdXBzZXJ0OiB0cnVlIH1cclxuICApXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVN5c3RlbVN0YXRzKCk6IFByb21pc2U8U3lzdGVtU3RhdHM+IHtcclxuICBjb25zdCBzdGF0cyA9IGF3YWl0IGdldFN5c3RlbVN0YXRzKClcclxuICBpZiAoc3RhdHMpIHJldHVybiBzdGF0c1xyXG4gIHJldHVybiBpbml0aWFsaXplU3lzdGVtU3RhdHMoKVxyXG59ICJdLCJuYW1lcyI6WyJnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24iLCJhZGRIb3VycyIsIkdMT0JBTF9TVEFUU19JRCIsIlVQREFURV9JTlRFUlZBTF9IT1VSUyIsIk51bWJlciIsInByb2Nlc3MiLCJlbnYiLCJnZXRTeXN0ZW1TdGF0cyIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiX2lkIiwiaW5pdGlhbGl6ZVN5c3RlbVN0YXRzIiwibm93IiwiRGF0ZSIsIm5leHRVcGRhdGUiLCJzdGF0cyIsImxhc3RVcGRhdGVUaW1lIiwibmV4dFNjaGVkdWxlZFVwZGF0ZSIsInRvdGFsUHJvY2Vzc2VkU3dhcHMiLCJ0b3RhbEpYUEF3YXJkZWQiLCJ1cGRhdGVPbmUiLCIkc2V0IiwidXBzZXJ0IiwidXBkYXRlTGFzdFByb2Nlc3NpbmdUaW1lIiwianhwQXdhcmRlZCIsInByb2Nlc3NlZFN3YXBzIiwiJGluYyIsImdldE9yQ3JlYXRlU3lzdGVtU3RhdHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database/system-stats.ts\n");

/***/ }),

/***/ "(api)/./lib/utils/auth.ts":
/*!***************************!*\
  !*** ./lib/utils/auth.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyAdminApiKey: () => (/* binding */ verifyAdminApiKey),\n/* harmony export */   verifyCronSecret: () => (/* binding */ verifyCronSecret)\n/* harmony export */ });\n/**\r\n * Memverifikasi API key untuk endpoint admin\r\n */ function verifyAdminApiKey(req) {\n    const apiKey = req.headers[\"x-api-key\"];\n    const validApiKey = process.env.ADMIN_API_KEY || \"admin123\"; // Use default for development\n    return apiKey === validApiKey;\n}\n/**\r\n * Memverifikasi cron secret untuk endpoint cron jobs\r\n */ function verifyCronSecret(req) {\n    const cronSecret = req.headers[\"x-cron-secret\"];\n    const validCronSecret = process.env.CRON_SECRET || \"admin123\"; // Use default for development\n    return cronSecret === validCronSecret;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVBOztDQUVDLEdBQ00sU0FBU0Esa0JBQWtCQyxHQUFtQjtJQUNuRCxNQUFNQyxTQUFTRCxJQUFJRSxPQUFPLENBQUMsWUFBWTtJQUN2QyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNDLGFBQWEsSUFBSSxZQUFZLDhCQUE4QjtJQUUzRixPQUFPTCxXQUFXRTtBQUNwQjtBQUVBOztDQUVDLEdBQ00sU0FBU0ksaUJBQWlCUCxHQUFtQjtJQUNsRCxNQUFNUSxhQUFhUixJQUFJRSxPQUFPLENBQUMsZ0JBQWdCO0lBQy9DLE1BQU1PLGtCQUFrQkwsUUFBUUMsR0FBRyxDQUFDSyxXQUFXLElBQUksWUFBWSw4QkFBOEI7SUFFN0YsT0FBT0YsZUFBZUM7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vbGliL3V0aWxzL2F1dGgudHM/YTg0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnXHJcblxyXG4vKipcclxuICogTWVtdmVyaWZpa2FzaSBBUEkga2V5IHVudHVrIGVuZHBvaW50IGFkbWluXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5QWRtaW5BcGlLZXkocmVxOiBOZXh0QXBpUmVxdWVzdCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGFwaUtleSA9IHJlcS5oZWFkZXJzWyd4LWFwaS1rZXknXTtcclxuICBjb25zdCB2YWxpZEFwaUtleSA9IHByb2Nlc3MuZW52LkFETUlOX0FQSV9LRVkgfHwgJ2FkbWluMTIzJzsgLy8gVXNlIGRlZmF1bHQgZm9yIGRldmVsb3BtZW50XHJcbiAgXHJcbiAgcmV0dXJuIGFwaUtleSA9PT0gdmFsaWRBcGlLZXk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNZW12ZXJpZmlrYXNpIGNyb24gc2VjcmV0IHVudHVrIGVuZHBvaW50IGNyb24gam9ic1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUNyb25TZWNyZXQocmVxOiBOZXh0QXBpUmVxdWVzdCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGNyb25TZWNyZXQgPSByZXEuaGVhZGVyc1sneC1jcm9uLXNlY3JldCddO1xyXG4gIGNvbnN0IHZhbGlkQ3JvblNlY3JldCA9IHByb2Nlc3MuZW52LkNST05fU0VDUkVUIHx8ICdhZG1pbjEyMyc7IC8vIFVzZSBkZWZhdWx0IGZvciBkZXZlbG9wbWVudFxyXG4gIFxyXG4gIHJldHVybiBjcm9uU2VjcmV0ID09PSB2YWxpZENyb25TZWNyZXQ7XHJcbn0gIl0sIm5hbWVzIjpbInZlcmlmeUFkbWluQXBpS2V5IiwicmVxIiwiYXBpS2V5IiwiaGVhZGVycyIsInZhbGlkQXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkFETUlOX0FQSV9LRVkiLCJ2ZXJpZnlDcm9uU2VjcmV0IiwiY3JvblNlY3JldCIsInZhbGlkQ3JvblNlY3JldCIsIkNST05fU0VDUkVUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/utils/auth.ts\n");

/***/ }),

/***/ "(api)/./pages/api/jxp/webhook.ts":
/*!**********************************!*\
  !*** ./pages/api/jxp/webhook.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_blockchain_jxp_calculator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/blockchain/jxp-calculator */ \"(api)/./lib/blockchain/jxp-calculator.ts\");\n/* harmony import */ var _lib_blockchain_contract_interaction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/blockchain/contract-interaction */ \"(api)/./lib/blockchain/contract-interaction.ts\");\n/* harmony import */ var _lib_utils_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils/auth */ \"(api)/./lib/utils/auth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_blockchain_contract_interaction__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_blockchain_contract_interaction__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\r\n * API endpoint to process JXP calculations and update blockchain\r\n * Called by Vercel cron job every 6 hours\r\n */ async function handler(req, res) {\n    // Only allow POST requests\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            success: false,\n            error: \"Method not allowed\"\n        });\n    }\n    // Verifikasi token cron untuk keamanan\n    const authorized = (0,_lib_utils_auth__WEBPACK_IMPORTED_MODULE_2__.verifyCronSecret)(req);\n    if (!authorized) {\n        return res.status(401).json({\n            success: false,\n            message: \"Unauthorized. Missing or invalid cron secret.\"\n        });\n    }\n    try {\n        // Step 1: Process all unprocessed swap events and calculate JXP\n        const { processedCount, totalJXPAwarded, userUpdates } = await (0,_lib_blockchain_jxp_calculator__WEBPACK_IMPORTED_MODULE_0__.processSwapEventsForJXP)();\n        // If no events were processed, return early\n        if (processedCount === 0) {\n            return res.status(200).json({\n                success: true,\n                message: \"No new swap events to process\",\n                processedCount: 0,\n                usersUpdated: 0,\n                blockchainUpdateSkipped: true\n            });\n        }\n        // Step 2: Update JXP on blockchain\n        const blockchainUpdate = await (0,_lib_blockchain_contract_interaction__WEBPACK_IMPORTED_MODULE_1__.batchUpdateJXPOnChain)();\n        // Return result\n        return res.status(200).json({\n            success: true,\n            message: `Successfully processed ${processedCount} swap events and updated JXP for ${blockchainUpdate.userCount} users`,\n            processedCount,\n            totalJXPAwarded,\n            usersUpdated: blockchainUpdate.userCount,\n            blockchainTxHash: blockchainUpdate.transactionHash,\n            blockchainUpdateSuccess: blockchainUpdate.success\n        });\n    } catch (error) {\n        console.error(\"Error in JXP webhook API:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvanhwL3dlYmhvb2sudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUN5RTtBQUNJO0FBQzFCO0FBRW5EOzs7Q0FHQyxHQUNjLGVBQWVHLFFBQzVCQyxHQUFtQixFQUNuQkMsR0FBb0I7SUFFcEIsMkJBQTJCO0lBQzNCLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQXFCO0lBQzVFO0lBRUEsdUNBQXVDO0lBQ3ZDLE1BQU1DLGFBQWFULGlFQUFnQkEsQ0FBQ0U7SUFDcEMsSUFBSSxDQUFDTyxZQUFZO1FBQ2YsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNURyxTQUFTO1FBQ1g7SUFDRjtJQUVBLElBQUk7UUFDRixnRUFBZ0U7UUFDaEUsTUFBTSxFQUFFQyxjQUFjLEVBQUVDLGVBQWUsRUFBRUMsV0FBVyxFQUFFLEdBQUcsTUFBTWYsdUZBQXVCQTtRQUV0Riw0Q0FBNEM7UUFDNUMsSUFBSWEsbUJBQW1CLEdBQUc7WUFDeEIsT0FBT1IsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLFNBQVM7Z0JBQ1RHLFNBQVM7Z0JBQ1RDLGdCQUFnQjtnQkFDaEJHLGNBQWM7Z0JBQ2RDLHlCQUF5QjtZQUMzQjtRQUNGO1FBRUEsbUNBQW1DO1FBQ25DLE1BQU1DLG1CQUFtQixNQUFNakIsMkZBQXFCQTtRQUVwRCxnQkFBZ0I7UUFDaEIsT0FBT0ksSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNURyxTQUFTLENBQUMsdUJBQXVCLEVBQUVDLGVBQWUsaUNBQWlDLEVBQUVLLGlCQUFpQkMsU0FBUyxDQUFDLE1BQU0sQ0FBQztZQUN2SE47WUFDQUM7WUFDQUUsY0FBY0UsaUJBQWlCQyxTQUFTO1lBQ3hDQyxrQkFBa0JGLGlCQUFpQkcsZUFBZTtZQUNsREMseUJBQXlCSixpQkFBaUJULE9BQU87UUFDbkQ7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZGEsUUFBUWIsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUQyxPQUFPQSxpQkFBaUJjLFFBQVFkLE1BQU1FLE9BQU8sR0FBRztRQUNsRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vcGFnZXMvYXBpL2p4cC93ZWJob29rLnRzPzM1ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXHJcbmltcG9ydCB7IHByb2Nlc3NTd2FwRXZlbnRzRm9ySlhQIH0gZnJvbSAnQC9saWIvYmxvY2tjaGFpbi9qeHAtY2FsY3VsYXRvcidcclxuaW1wb3J0IHsgYmF0Y2hVcGRhdGVKWFBPbkNoYWluIH0gZnJvbSAnQC9saWIvYmxvY2tjaGFpbi9jb250cmFjdC1pbnRlcmFjdGlvbidcclxuaW1wb3J0IHsgdmVyaWZ5Q3JvblNlY3JldCB9IGZyb20gJ0AvbGliL3V0aWxzL2F1dGgnXHJcblxyXG4vKipcclxuICogQVBJIGVuZHBvaW50IHRvIHByb2Nlc3MgSlhQIGNhbGN1bGF0aW9ucyBhbmQgdXBkYXRlIGJsb2NrY2hhaW5cclxuICogQ2FsbGVkIGJ5IFZlcmNlbCBjcm9uIGpvYiBldmVyeSA2IGhvdXJzXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgLy8gT25seSBhbGxvdyBQT1NUIHJlcXVlc3RzXHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KVxyXG4gIH1cclxuXHJcbiAgLy8gVmVyaWZpa2FzaSB0b2tlbiBjcm9uIHVudHVrIGtlYW1hbmFuXHJcbiAgY29uc3QgYXV0aG9yaXplZCA9IHZlcmlmeUNyb25TZWNyZXQocmVxKTtcclxuICBpZiAoIWF1dGhvcml6ZWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxyXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgIG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQuIE1pc3Npbmcgb3IgaW52YWxpZCBjcm9uIHNlY3JldC4nIFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gU3RlcCAxOiBQcm9jZXNzIGFsbCB1bnByb2Nlc3NlZCBzd2FwIGV2ZW50cyBhbmQgY2FsY3VsYXRlIEpYUFxyXG4gICAgY29uc3QgeyBwcm9jZXNzZWRDb3VudCwgdG90YWxKWFBBd2FyZGVkLCB1c2VyVXBkYXRlcyB9ID0gYXdhaXQgcHJvY2Vzc1N3YXBFdmVudHNGb3JKWFAoKVxyXG4gICAgXHJcbiAgICAvLyBJZiBubyBldmVudHMgd2VyZSBwcm9jZXNzZWQsIHJldHVybiBlYXJseVxyXG4gICAgaWYgKHByb2Nlc3NlZENvdW50ID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiAnTm8gbmV3IHN3YXAgZXZlbnRzIHRvIHByb2Nlc3MnLFxyXG4gICAgICAgIHByb2Nlc3NlZENvdW50OiAwLFxyXG4gICAgICAgIHVzZXJzVXBkYXRlZDogMCxcclxuICAgICAgICBibG9ja2NoYWluVXBkYXRlU2tpcHBlZDogdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBTdGVwIDI6IFVwZGF0ZSBKWFAgb24gYmxvY2tjaGFpblxyXG4gICAgY29uc3QgYmxvY2tjaGFpblVwZGF0ZSA9IGF3YWl0IGJhdGNoVXBkYXRlSlhQT25DaGFpbigpXHJcbiAgICBcclxuICAgIC8vIFJldHVybiByZXN1bHRcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgcHJvY2Vzc2VkICR7cHJvY2Vzc2VkQ291bnR9IHN3YXAgZXZlbnRzIGFuZCB1cGRhdGVkIEpYUCBmb3IgJHtibG9ja2NoYWluVXBkYXRlLnVzZXJDb3VudH0gdXNlcnNgLFxyXG4gICAgICBwcm9jZXNzZWRDb3VudCxcclxuICAgICAgdG90YWxKWFBBd2FyZGVkLFxyXG4gICAgICB1c2Vyc1VwZGF0ZWQ6IGJsb2NrY2hhaW5VcGRhdGUudXNlckNvdW50LFxyXG4gICAgICBibG9ja2NoYWluVHhIYXNoOiBibG9ja2NoYWluVXBkYXRlLnRyYW5zYWN0aW9uSGFzaCxcclxuICAgICAgYmxvY2tjaGFpblVwZGF0ZVN1Y2Nlc3M6IGJsb2NrY2hhaW5VcGRhdGUuc3VjY2Vzc1xyXG4gICAgfSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gSlhQIHdlYmhvb2sgQVBJOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xyXG4gICAgfSlcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbInByb2Nlc3NTd2FwRXZlbnRzRm9ySlhQIiwiYmF0Y2hVcGRhdGVKWFBPbkNoYWluIiwidmVyaWZ5Q3JvblNlY3JldCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiYXV0aG9yaXplZCIsIm1lc3NhZ2UiLCJwcm9jZXNzZWRDb3VudCIsInRvdGFsSlhQQXdhcmRlZCIsInVzZXJVcGRhdGVzIiwidXNlcnNVcGRhdGVkIiwiYmxvY2tjaGFpblVwZGF0ZVNraXBwZWQiLCJibG9ja2NoYWluVXBkYXRlIiwidXNlckNvdW50IiwiYmxvY2tjaGFpblR4SGFzaCIsInRyYW5zYWN0aW9uSGFzaCIsImJsb2NrY2hhaW5VcGRhdGVTdWNjZXNzIiwiY29uc29sZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/jxp/webhook.ts\n");

/***/ }),

/***/ "(api)/./config/abis/JikunaXtraPointsV2.json":
/*!*********************************************!*\
  !*** ./config/abis/JikunaXtraPointsV2.json ***!
  \*********************************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"inputs":[{"internalType":"address[]","name":"users","type":"address[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"}],"name":"updatePoints","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"pointsOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fwebhook&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cwebhook.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();