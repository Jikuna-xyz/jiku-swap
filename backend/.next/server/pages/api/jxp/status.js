"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/jxp/status";
exports.ids = ["pages/api/jxp/status"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/__barrel_optimize__?names=addHours!=!./node_modules/date-fns/index.mjs":
/*!******************************************************************************!*\
  !*** __barrel_optimize__?names=addHours!=!./node_modules/date-fns/index.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addHours: () => (/* reexport safe */ D_user_jiku_swap_backend_node_modules_date_fns_addHours_mjs__WEBPACK_IMPORTED_MODULE_0__.addHours)
/* harmony export */ });
/* harmony import */ var D_user_jiku_swap_backend_node_modules_date_fns_addHours_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/date-fns/addHours.mjs */ "(api)/./node_modules/date-fns/addHours.mjs");



/***/ }),

/***/ "(api)/__barrel_optimize__?names=addHours,format!=!./node_modules/date-fns/index.mjs":
/*!*************************************************************************************!*\
  !*** __barrel_optimize__?names=addHours,format!=!./node_modules/date-fns/index.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addHours: () => (/* reexport safe */ D_user_jiku_swap_backend_node_modules_date_fns_addHours_mjs__WEBPACK_IMPORTED_MODULE_0__.addHours),\n/* harmony export */   format: () => (/* reexport safe */ D_user_jiku_swap_backend_node_modules_date_fns_format_mjs__WEBPACK_IMPORTED_MODULE_1__.format)\n/* harmony export */ });\n/* harmony import */ var D_user_jiku_swap_backend_node_modules_date_fns_addHours_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/date-fns/addHours.mjs */ \"(api)/./node_modules/date-fns/addHours.mjs\");\n/* harmony import */ var D_user_jiku_swap_backend_node_modules_date_fns_format_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./node_modules/date-fns/format.mjs */ \"(api)/./node_modules/date-fns/format.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvX19iYXJyZWxfb3B0aW1pemVfXz9uYW1lcz1hZGRIb3Vycyxmb3JtYXQhPSEuL25vZGVfbW9kdWxlcy9kYXRlLWZucy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDNkYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2luZGV4Lm1qcz9kYjY0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IHsgYWRkSG91cnMgfSBmcm9tIFwiRDpcXFxcdXNlclxcXFxqaWt1LXN3YXBcXFxcYmFja2VuZFxcXFxub2RlX21vZHVsZXNcXFxcZGF0ZS1mbnNcXFxcYWRkSG91cnMubWpzXCJcbmV4cG9ydCB7IGZvcm1hdCB9IGZyb20gXCJEOlxcXFx1c2VyXFxcXGppa3Utc3dhcFxcXFxiYWNrZW5kXFxcXG5vZGVfbW9kdWxlc1xcXFxkYXRlLWZuc1xcXFxmb3JtYXQubWpzXCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/__barrel_optimize__?names=addHours,format!=!./node_modules/date-fns/index.mjs\n");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cstatus.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cstatus.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_jxp_status_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\jxp\\status.ts */ \"(api)/./pages/api/jxp/status.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_jxp_status_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_jxp_status_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/jxp/status\",\n        pathname: \"/api/jxp/status\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_jxp_status_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmp4cCUyRnN0YXR1cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDanhwJTVDc3RhdHVzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8/MmQzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGp4cFxcXFxzdGF0dXMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9qeHAvc3RhdHVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvanhwL3N0YXR1c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cstatus.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/database/jxp-updates.ts":
/*!*************************************!*\
  !*** ./lib/database/jxp-updates.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearPendingJXP: () => (/* binding */ clearPendingJXP),\n/* harmony export */   getAllPendingJXPUpdates: () => (/* binding */ getAllPendingJXPUpdates),\n/* harmony export */   getJXPUpdateByUser: () => (/* binding */ getJXPUpdateByUser),\n/* harmony export */   getTopJXPUsers: () => (/* binding */ getTopJXPUsers),\n/* harmony export */   getTotalPendingJXP: () => (/* binding */ getTotalPendingJXP),\n/* harmony export */   updateUserJXP: () => (/* binding */ updateUserJXP)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(api)/./lib/database/mongodb.ts\");\n\nasync function getJXPUpdateByUser(userAddress) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    return collection.findOne({\n        user: userAddress.toLowerCase()\n    });\n}\nasync function getAllPendingJXPUpdates() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    return collection.find({\n        pendingJXP: {\n            $gt: 0\n        }\n    }).toArray();\n}\nasync function updateUserJXP(userAddress, jxpAmount) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    const user = userAddress.toLowerCase();\n    const now = new Date();\n    await collection.updateOne({\n        user\n    }, {\n        $inc: {\n            pendingJXP: jxpAmount\n        },\n        $set: {\n            lastUpdated: now\n        }\n    }, {\n        upsert: true\n    });\n}\nasync function clearPendingJXP(userAddresses) {\n    if (userAddresses.length === 0) return;\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    const now = new Date();\n    const operations = userAddresses.map((address)=>({\n            updateOne: {\n                filter: {\n                    user: address.toLowerCase()\n                },\n                update: {\n                    $set: {\n                        pendingJXP: 0,\n                        lastUpdated: now\n                    }\n                }\n            }\n        }));\n    await collection.bulkWrite(operations);\n}\nasync function getTotalPendingJXP() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    const result = await collection.aggregate([\n        {\n            $group: {\n                _id: null,\n                total: {\n                    $sum: \"$pendingJXP\"\n                }\n            }\n        }\n    ]).toArray();\n    return result.length > 0 ? result[0].total : 0;\n}\nasync function getTopJXPUsers(limit = 10) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getJXPUpdatesCollection)();\n    return collection.find().sort({\n        pendingJXP: -1\n    }).limit(limit).toArray();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UvanhwLXVwZGF0ZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFtRDtBQUc1QyxlQUFlQyxtQkFBbUJDLFdBQW1CO0lBQzFELE1BQU1DLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxPQUFPRyxXQUFXQyxPQUFPLENBQUM7UUFBRUMsTUFBTUgsWUFBWUksV0FBVztJQUFHO0FBQzlEO0FBRU8sZUFBZUM7SUFDcEIsTUFBTUosYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE9BQU9HLFdBQVdLLElBQUksQ0FBQztRQUFFQyxZQUFZO1lBQUVDLEtBQUs7UUFBRTtJQUFFLEdBQUdDLE9BQU87QUFDNUQ7QUFFTyxlQUFlQyxjQUFjVixXQUFtQixFQUFFVyxTQUFpQjtJQUN4RSxNQUFNVixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsTUFBTUssT0FBT0gsWUFBWUksV0FBVztJQUNwQyxNQUFNUSxNQUFNLElBQUlDO0lBRWhCLE1BQU1aLFdBQVdhLFNBQVMsQ0FDeEI7UUFBRVg7SUFBSyxHQUNQO1FBQ0VZLE1BQU07WUFBRVIsWUFBWUk7UUFBVTtRQUM5QkssTUFBTTtZQUFFQyxhQUFhTDtRQUFJO0lBQzNCLEdBQ0E7UUFBRU0sUUFBUTtJQUFLO0FBRW5CO0FBRU8sZUFBZUMsZ0JBQWdCQyxhQUF1QjtJQUMzRCxJQUFJQSxjQUFjQyxNQUFNLEtBQUssR0FBRztJQUVoQyxNQUFNcEIsYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE1BQU1jLE1BQU0sSUFBSUM7SUFFaEIsTUFBTVMsYUFBYUYsY0FBY0csR0FBRyxDQUFDQyxDQUFBQSxVQUFZO1lBQy9DVixXQUFXO2dCQUNUVyxRQUFRO29CQUFFdEIsTUFBTXFCLFFBQVFwQixXQUFXO2dCQUFHO2dCQUN0Q3NCLFFBQVE7b0JBQUVWLE1BQU07d0JBQUVULFlBQVk7d0JBQUdVLGFBQWFMO29CQUFJO2dCQUFFO1lBQ3REO1FBQ0Y7SUFFQSxNQUFNWCxXQUFXMEIsU0FBUyxDQUFDTDtBQUM3QjtBQUVPLGVBQWVNO0lBQ3BCLE1BQU0zQixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsTUFBTStCLFNBQVMsTUFBTTVCLFdBQVc2QixTQUFTLENBQUM7UUFDeEM7WUFBRUMsUUFBUTtnQkFBRUMsS0FBSztnQkFBTUMsT0FBTztvQkFBRUMsTUFBTTtnQkFBYztZQUFFO1FBQUU7S0FDekQsRUFBRXpCLE9BQU87SUFFVixPQUFPb0IsT0FBT1IsTUFBTSxHQUFHLElBQUlRLE1BQU0sQ0FBQyxFQUFFLENBQUNJLEtBQUssR0FBRztBQUMvQztBQUVPLGVBQWVFLGVBQWVDLFFBQWdCLEVBQUU7SUFDckQsTUFBTW5DLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxPQUFPRyxXQUNKSyxJQUFJLEdBQ0orQixJQUFJLENBQUM7UUFBRTlCLFlBQVksQ0FBQztJQUFFLEdBQ3RCNkIsS0FBSyxDQUFDQSxPQUNOM0IsT0FBTztBQUNaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2xpYi9kYXRhYmFzZS9qeHAtdXBkYXRlcy50cz84M2JiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uIH0gZnJvbSAnLi9tb25nb2RiJ1xyXG5pbXBvcnQgeyBKWFBVcGRhdGUgfSBmcm9tICdAL3R5cGVzL2p4cC11cGRhdGUnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SlhQVXBkYXRlQnlVc2VyKHVzZXJBZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPEpYUFVwZGF0ZSB8IG51bGw+IHtcclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0SlhQVXBkYXRlc0NvbGxlY3Rpb24oKVxyXG4gIHJldHVybiBjb2xsZWN0aW9uLmZpbmRPbmUoeyB1c2VyOiB1c2VyQWRkcmVzcy50b0xvd2VyQ2FzZSgpIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxQZW5kaW5nSlhQVXBkYXRlcygpOiBQcm9taXNlPEpYUFVwZGF0ZVtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5maW5kKHsgcGVuZGluZ0pYUDogeyAkZ3Q6IDAgfSB9KS50b0FycmF5KClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJKWFAodXNlckFkZHJlc3M6IHN0cmluZywganhwQW1vdW50OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0SlhQVXBkYXRlc0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IHVzZXIgPSB1c2VyQWRkcmVzcy50b0xvd2VyQ2FzZSgpXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG5cclxuICBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShcclxuICAgIHsgdXNlciB9LFxyXG4gICAgeyBcclxuICAgICAgJGluYzogeyBwZW5kaW5nSlhQOiBqeHBBbW91bnQgfSxcclxuICAgICAgJHNldDogeyBsYXN0VXBkYXRlZDogbm93IH1cclxuICAgIH0sXHJcbiAgICB7IHVwc2VydDogdHJ1ZSB9XHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJQZW5kaW5nSlhQKHVzZXJBZGRyZXNzZXM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgaWYgKHVzZXJBZGRyZXNzZXMubGVuZ3RoID09PSAwKSByZXR1cm5cclxuICBcclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0SlhQVXBkYXRlc0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBcclxuICBjb25zdCBvcGVyYXRpb25zID0gdXNlckFkZHJlc3Nlcy5tYXAoYWRkcmVzcyA9PiAoe1xyXG4gICAgdXBkYXRlT25lOiB7XHJcbiAgICAgIGZpbHRlcjogeyB1c2VyOiBhZGRyZXNzLnRvTG93ZXJDYXNlKCkgfSxcclxuICAgICAgdXBkYXRlOiB7ICRzZXQ6IHsgcGVuZGluZ0pYUDogMCwgbGFzdFVwZGF0ZWQ6IG5vdyB9IH1cclxuICAgIH1cclxuICB9KSlcclxuICBcclxuICBhd2FpdCBjb2xsZWN0aW9uLmJ1bGtXcml0ZShvcGVyYXRpb25zKVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxQZW5kaW5nSlhQKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKClcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmFnZ3JlZ2F0ZShbXHJcbiAgICB7ICRncm91cDogeyBfaWQ6IG51bGwsIHRvdGFsOiB7ICRzdW06ICckcGVuZGluZ0pYUCcgfSB9IH1cclxuICBdKS50b0FycmF5KClcclxuICBcclxuICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDAgPyByZXN1bHRbMF0udG90YWwgOiAwXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3BKWFBVc2VycyhsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPEpYUFVwZGF0ZVtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvblxyXG4gICAgLmZpbmQoKVxyXG4gICAgLnNvcnQoeyBwZW5kaW5nSlhQOiAtMSB9KVxyXG4gICAgLmxpbWl0KGxpbWl0KVxyXG4gICAgLnRvQXJyYXkoKVxyXG59ICJdLCJuYW1lcyI6WyJnZXRKWFBVcGRhdGVzQ29sbGVjdGlvbiIsImdldEpYUFVwZGF0ZUJ5VXNlciIsInVzZXJBZGRyZXNzIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJ1c2VyIiwidG9Mb3dlckNhc2UiLCJnZXRBbGxQZW5kaW5nSlhQVXBkYXRlcyIsImZpbmQiLCJwZW5kaW5nSlhQIiwiJGd0IiwidG9BcnJheSIsInVwZGF0ZVVzZXJKWFAiLCJqeHBBbW91bnQiLCJub3ciLCJEYXRlIiwidXBkYXRlT25lIiwiJGluYyIsIiRzZXQiLCJsYXN0VXBkYXRlZCIsInVwc2VydCIsImNsZWFyUGVuZGluZ0pYUCIsInVzZXJBZGRyZXNzZXMiLCJsZW5ndGgiLCJvcGVyYXRpb25zIiwibWFwIiwiYWRkcmVzcyIsImZpbHRlciIsInVwZGF0ZSIsImJ1bGtXcml0ZSIsImdldFRvdGFsUGVuZGluZ0pYUCIsInJlc3VsdCIsImFnZ3JlZ2F0ZSIsIiRncm91cCIsIl9pZCIsInRvdGFsIiwiJHN1bSIsImdldFRvcEpYUFVzZXJzIiwibGltaXQiLCJzb3J0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/jxp-updates.ts\n");

/***/ }),

/***/ "(api)/./lib/database/mongodb.ts":
/*!*********************************!*\
  !*** ./lib/database/mongodb.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientPromise: () => (/* binding */ clientPromise),\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   getJXPUpdatesCollection: () => (/* binding */ getJXPUpdatesCollection),\n/* harmony export */   getSwapEventsCollection: () => (/* binding */ getSwapEventsCollection),\n/* harmony export */   getSystemStatsCollection: () => (/* binding */ getSystemStatsCollection)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nlet db;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    let globalWithMongo = global;\n    if (!globalWithMongo._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        globalWithMongo._mongoClientPromise = client.connect();\n    }\n    // Pastikan clientPromise tidak undefined\n    clientPromise = globalWithMongo._mongoClientPromise;\n} else {}\nasync function getDb() {\n    if (!db) {\n        const connectedClient = await clientPromise;\n        db = connectedClient.db(\"jikuna-jxp\");\n    }\n    return db;\n}\nasync function getSwapEventsCollection() {\n    const db = await getDb();\n    return db.collection(\"swapEvents\");\n}\nasync function getJXPUpdatesCollection() {\n    const db = await getDb();\n    return db.collection(\"jxpUpdates\");\n}\nasync function getSystemStatsCollection() {\n    const db = await getDb();\n    return db.collection(\"systemStats\");\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBSXJELElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLEVBQUU7SUFDNUIsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsTUFBTUMsTUFBTUosUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0FBQ25DLE1BQU1HLFVBQVUsQ0FBQztBQUVqQixJQUFJQztBQUNKLElBQUlDO0FBQ0osSUFBSUM7QUFFSixJQUFJUixJQUF5QixFQUFlO0lBQzFDLCtEQUErRDtJQUMvRCw2RUFBNkU7SUFDN0UsSUFBSVMsa0JBQWtCQztJQUl0QixJQUFJLENBQUNELGdCQUFnQkUsbUJBQW1CLEVBQUU7UUFDeENMLFNBQVMsSUFBSVAsZ0RBQVdBLENBQUNLLEtBQUtDO1FBQzlCSSxnQkFBZ0JFLG1CQUFtQixHQUFHTCxPQUFPTSxPQUFPO0lBQ3REO0lBQ0EseUNBQXlDO0lBQ3pDTCxnQkFBZ0JFLGdCQUFnQkUsbUJBQW1CO0FBQ3JELE9BQU8sRUFJTjtBQUVNLGVBQWVFO0lBQ3BCLElBQUksQ0FBQ0wsSUFBSTtRQUNQLE1BQU1NLGtCQUFrQixNQUFNUDtRQUM5QkMsS0FBS00sZ0JBQWdCTixFQUFFLENBQUM7SUFDMUI7SUFDQSxPQUFPQTtBQUNUO0FBRU8sZUFBZU87SUFDcEIsTUFBTVAsS0FBSyxNQUFNSztJQUNqQixPQUFPTCxHQUFHUSxVQUFVLENBQVk7QUFDbEM7QUFFTyxlQUFlQztJQUNwQixNQUFNVCxLQUFLLE1BQU1LO0lBQ2pCLE9BQU9MLEdBQUdRLFVBQVUsQ0FBWTtBQUNsQztBQUVPLGVBQWVFO0lBQ3BCLE1BQU1WLEtBQUssTUFBTUs7SUFDakIsT0FBT0wsR0FBR1EsVUFBVSxDQUFjO0FBQ3BDO0FBRXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2xpYi9kYXRhYmFzZS9tb25nb2RiLnRzPzhiNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIERiLCBDb2xsZWN0aW9uIH0gZnJvbSAnbW9uZ29kYidcclxuaW1wb3J0IHsgU3dhcEV2ZW50IH0gZnJvbSAnQC90eXBlcy9zd2FwLWV2ZW50J1xyXG5pbXBvcnQgeyBKWFBVcGRhdGUsIFN5c3RlbVN0YXRzIH0gZnJvbSAnQC90eXBlcy9qeHAtdXBkYXRlJ1xyXG5cclxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGRlZmluZSB0aGUgTU9OR09EQl9VUkkgZW52aXJvbm1lbnQgdmFyaWFibGUnKVxyXG59XHJcblxyXG5jb25zdCB1cmkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSVxyXG5jb25zdCBvcHRpb25zID0ge31cclxuXHJcbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50XHJcbmxldCBjbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PlxyXG5sZXQgZGI6IERiXHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcclxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxyXG4gIGxldCBnbG9iYWxXaXRoTW9uZ28gPSBnbG9iYWwgYXMgdHlwZW9mIGdsb2JhbFRoaXMgJiB7XHJcbiAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD5cclxuICB9XHJcblxyXG4gIGlmICghZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXHJcbiAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcclxuICB9XHJcbiAgLy8gUGFzdGlrYW4gY2xpZW50UHJvbWlzZSB0aWRhayB1bmRlZmluZWRcclxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UgYXMgUHJvbWlzZTxNb25nb0NsaWVudD5cclxufSBlbHNlIHtcclxuICAvLyBJbiBwcm9kdWN0aW9uIG1vZGUsIGl0J3MgYmVzdCB0byBub3QgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlLlxyXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpXHJcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERiKCk6IFByb21pc2U8RGI+IHtcclxuICBpZiAoIWRiKSB7XHJcbiAgICBjb25zdCBjb25uZWN0ZWRDbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlXHJcbiAgICBkYiA9IGNvbm5lY3RlZENsaWVudC5kYignamlrdW5hLWp4cCcpXHJcbiAgfVxyXG4gIHJldHVybiBkYlxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3dhcEV2ZW50c0NvbGxlY3Rpb24oKTogUHJvbWlzZTxDb2xsZWN0aW9uPFN3YXBFdmVudD4+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IGdldERiKClcclxuICByZXR1cm4gZGIuY29sbGVjdGlvbjxTd2FwRXZlbnQ+KCdzd2FwRXZlbnRzJylcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uKCk6IFByb21pc2U8Q29sbGVjdGlvbjxKWFBVcGRhdGU+PiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYigpXHJcbiAgcmV0dXJuIGRiLmNvbGxlY3Rpb248SlhQVXBkYXRlPignanhwVXBkYXRlcycpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24oKTogUHJvbWlzZTxDb2xsZWN0aW9uPFN5c3RlbVN0YXRzPj4ge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGIoKVxyXG4gIHJldHVybiBkYi5jb2xsZWN0aW9uPFN5c3RlbVN0YXRzPignc3lzdGVtU3RhdHMnKVxyXG59XHJcblxyXG5leHBvcnQgeyBjbGllbnRQcm9taXNlIH0gIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJ1cmkiLCJvcHRpb25zIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsImRiIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiLCJnZXREYiIsImNvbm5lY3RlZENsaWVudCIsImdldFN3YXBFdmVudHNDb2xsZWN0aW9uIiwiY29sbGVjdGlvbiIsImdldEpYUFVwZGF0ZXNDb2xsZWN0aW9uIiwiZ2V0U3lzdGVtU3RhdHNDb2xsZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/mongodb.ts\n");

/***/ }),

/***/ "(api)/./lib/database/swap-events.ts":
/*!*************************************!*\
  !*** ./lib/database/swap-events.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRecentSwapEvents: () => (/* binding */ getRecentSwapEvents),\n/* harmony export */   getSwapEventByTxHash: () => (/* binding */ getSwapEventByTxHash),\n/* harmony export */   getTotalProcessedSwaps: () => (/* binding */ getTotalProcessedSwaps),\n/* harmony export */   getUnprocessedSwapEvents: () => (/* binding */ getUnprocessedSwapEvents),\n/* harmony export */   markSwapEventsAsProcessed: () => (/* binding */ markSwapEventsAsProcessed),\n/* harmony export */   saveSwapEvent: () => (/* binding */ saveSwapEvent),\n/* harmony export */   saveSwapEvents: () => (/* binding */ saveSwapEvents)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(api)/./lib/database/mongodb.ts\");\n\nasync function saveSwapEvent(swapEvent) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    await collection.insertOne(swapEvent);\n}\nasync function saveSwapEvents(swapEvents) {\n    if (swapEvents.length === 0) return;\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    await collection.insertMany(swapEvents);\n}\nasync function getUnprocessedSwapEvents() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.find({\n        processed: false\n    }).toArray();\n}\nasync function markSwapEventsAsProcessed(swapEventIds) {\n    if (swapEventIds.length === 0) return;\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    const now = new Date();\n    await collection.updateMany({\n        _id: {\n            $in: swapEventIds\n        }\n    }, {\n        $set: {\n            processed: true,\n            processedAt: now\n        }\n    });\n}\nasync function getSwapEventByTxHash(txHash) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.findOne({\n        txHash\n    });\n}\nasync function getTotalProcessedSwaps() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.countDocuments({\n        processed: true\n    });\n}\nasync function getRecentSwapEvents(limit = 10) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSwapEventsCollection)();\n    return collection.find().sort({\n        timestamp: -1\n    }).limit(limit).toArray();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Uvc3dhcC1ldmVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBbUQ7QUFHNUMsZUFBZUMsY0FBY0MsU0FBb0I7SUFDdEQsTUFBTUMsYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE1BQU1HLFdBQVdDLFNBQVMsQ0FBQ0Y7QUFDN0I7QUFFTyxlQUFlRyxlQUFlQyxVQUF1QjtJQUMxRCxJQUFJQSxXQUFXQyxNQUFNLEtBQUssR0FBRztJQUM3QixNQUFNSixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsTUFBTUcsV0FBV0ssVUFBVSxDQUFDRjtBQUM5QjtBQUVPLGVBQWVHO0lBQ3BCLE1BQU1OLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxPQUFPRyxXQUFXTyxJQUFJLENBQUM7UUFBRUMsV0FBVztJQUFNLEdBQUdDLE9BQU87QUFDdEQ7QUFFTyxlQUFlQywwQkFBMEJDLFlBQXNCO0lBQ3BFLElBQUlBLGFBQWFQLE1BQU0sS0FBSyxHQUFHO0lBQy9CLE1BQU1KLGFBQWEsTUFBTUgsaUVBQXVCQTtJQUNoRCxNQUFNZSxNQUFNLElBQUlDO0lBRWhCLE1BQU1iLFdBQVdjLFVBQVUsQ0FDekI7UUFBRUMsS0FBSztZQUFFQyxLQUFLTDtRQUFhO0lBQUUsR0FDN0I7UUFBRU0sTUFBTTtZQUFFVCxXQUFXO1lBQU1VLGFBQWFOO1FBQUk7SUFBRTtBQUVsRDtBQUVPLGVBQWVPLHFCQUFxQkMsTUFBYztJQUN2RCxNQUFNcEIsYUFBYSxNQUFNSCxpRUFBdUJBO0lBQ2hELE9BQU9HLFdBQVdxQixPQUFPLENBQUM7UUFBRUQ7SUFBTztBQUNyQztBQUVPLGVBQWVFO0lBQ3BCLE1BQU10QixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsT0FBT0csV0FBV3VCLGNBQWMsQ0FBQztRQUFFZixXQUFXO0lBQUs7QUFDckQ7QUFFTyxlQUFlZ0Isb0JBQW9CQyxRQUFnQixFQUFFO0lBQzFELE1BQU16QixhQUFhLE1BQU1ILGlFQUF1QkE7SUFDaEQsT0FBT0csV0FDSk8sSUFBSSxHQUNKbUIsSUFBSSxDQUFDO1FBQUVDLFdBQVcsQ0FBQztJQUFFLEdBQ3JCRixLQUFLLENBQUNBLE9BQ05oQixPQUFPO0FBQ1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vbGliL2RhdGFiYXNlL3N3YXAtZXZlbnRzLnRzPzZiM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U3dhcEV2ZW50c0NvbGxlY3Rpb24gfSBmcm9tICcuL21vbmdvZGInXHJcbmltcG9ydCB7IFN3YXBFdmVudCB9IGZyb20gJ0AvdHlwZXMvc3dhcC1ldmVudCdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3dhcEV2ZW50KHN3YXBFdmVudDogU3dhcEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE9uZShzd2FwRXZlbnQpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3dhcEV2ZW50cyhzd2FwRXZlbnRzOiBTd2FwRXZlbnRbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGlmIChzd2FwRXZlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE1hbnkoc3dhcEV2ZW50cylcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVucHJvY2Vzc2VkU3dhcEV2ZW50cygpOiBQcm9taXNlPFN3YXBFdmVudFtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5maW5kKHsgcHJvY2Vzc2VkOiBmYWxzZSB9KS50b0FycmF5KClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcmtTd2FwRXZlbnRzQXNQcm9jZXNzZWQoc3dhcEV2ZW50SWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGlmIChzd2FwRXZlbnRJZHMubGVuZ3RoID09PSAwKSByZXR1cm5cclxuICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgZ2V0U3dhcEV2ZW50c0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBcclxuICBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU1hbnkoXHJcbiAgICB7IF9pZDogeyAkaW46IHN3YXBFdmVudElkcyB9IH0sXHJcbiAgICB7ICRzZXQ6IHsgcHJvY2Vzc2VkOiB0cnVlLCBwcm9jZXNzZWRBdDogbm93IH0gfVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN3YXBFdmVudEJ5VHhIYXNoKHR4SGFzaDogc3RyaW5nKTogUHJvbWlzZTxTd2FwRXZlbnQgfCBudWxsPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5maW5kT25lKHsgdHhIYXNoIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3RhbFByb2Nlc3NlZFN3YXBzKCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvbi5jb3VudERvY3VtZW50cyh7IHByb2Nlc3NlZDogdHJ1ZSB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVjZW50U3dhcEV2ZW50cyhsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPFN3YXBFdmVudFtdPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN3YXBFdmVudHNDb2xsZWN0aW9uKClcclxuICByZXR1cm4gY29sbGVjdGlvblxyXG4gICAgLmZpbmQoKVxyXG4gICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXHJcbiAgICAubGltaXQobGltaXQpXHJcbiAgICAudG9BcnJheSgpXHJcbn0gIl0sIm5hbWVzIjpbImdldFN3YXBFdmVudHNDb2xsZWN0aW9uIiwic2F2ZVN3YXBFdmVudCIsInN3YXBFdmVudCIsImNvbGxlY3Rpb24iLCJpbnNlcnRPbmUiLCJzYXZlU3dhcEV2ZW50cyIsInN3YXBFdmVudHMiLCJsZW5ndGgiLCJpbnNlcnRNYW55IiwiZ2V0VW5wcm9jZXNzZWRTd2FwRXZlbnRzIiwiZmluZCIsInByb2Nlc3NlZCIsInRvQXJyYXkiLCJtYXJrU3dhcEV2ZW50c0FzUHJvY2Vzc2VkIiwic3dhcEV2ZW50SWRzIiwibm93IiwiRGF0ZSIsInVwZGF0ZU1hbnkiLCJfaWQiLCIkaW4iLCIkc2V0IiwicHJvY2Vzc2VkQXQiLCJnZXRTd2FwRXZlbnRCeVR4SGFzaCIsInR4SGFzaCIsImZpbmRPbmUiLCJnZXRUb3RhbFByb2Nlc3NlZFN3YXBzIiwiY291bnREb2N1bWVudHMiLCJnZXRSZWNlbnRTd2FwRXZlbnRzIiwibGltaXQiLCJzb3J0IiwidGltZXN0YW1wIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/database/swap-events.ts\n");

/***/ }),

/***/ "(api)/./lib/database/system-stats.ts":
/*!**************************************!*\
  !*** ./lib/database/system-stats.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOrCreateSystemStats: () => (/* binding */ getOrCreateSystemStats),\n/* harmony export */   getSystemStats: () => (/* binding */ getSystemStats),\n/* harmony export */   initializeSystemStats: () => (/* binding */ initializeSystemStats),\n/* harmony export */   updateLastProcessingTime: () => (/* binding */ updateLastProcessingTime)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(api)/./lib/database/mongodb.ts\");\n/* harmony import */ var _barrel_optimize_names_addHours_date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! __barrel_optimize__?names=addHours!=!date-fns */ \"(api)/__barrel_optimize__?names=addHours!=!./node_modules/date-fns/index.mjs\");\n\n\nconst GLOBAL_STATS_ID = \"global\";\nconst UPDATE_INTERVAL_HOURS = Number(process.env.UPDATE_INTERVAL_HOURS || 6);\nasync function getSystemStats() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSystemStatsCollection)();\n    return collection.findOne({\n        _id: GLOBAL_STATS_ID\n    });\n}\nasync function initializeSystemStats() {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSystemStatsCollection)();\n    const now = new Date();\n    const nextUpdate = (0,_barrel_optimize_names_addHours_date_fns__WEBPACK_IMPORTED_MODULE_1__.addHours)(now, UPDATE_INTERVAL_HOURS);\n    const stats = {\n        _id: GLOBAL_STATS_ID,\n        lastUpdateTime: now,\n        nextScheduledUpdate: nextUpdate,\n        totalProcessedSwaps: 0,\n        totalJXPAwarded: 0\n    };\n    await collection.updateOne({\n        _id: GLOBAL_STATS_ID\n    }, {\n        $set: stats\n    }, {\n        upsert: true\n    });\n    return stats;\n}\nasync function updateLastProcessingTime(jxpAwarded, processedSwaps) {\n    const collection = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getSystemStatsCollection)();\n    const now = new Date();\n    const nextUpdate = (0,_barrel_optimize_names_addHours_date_fns__WEBPACK_IMPORTED_MODULE_1__.addHours)(now, UPDATE_INTERVAL_HOURS);\n    await collection.updateOne({\n        _id: GLOBAL_STATS_ID\n    }, {\n        $set: {\n            lastUpdateTime: now,\n            nextScheduledUpdate: nextUpdate\n        },\n        $inc: {\n            totalJXPAwarded: jxpAwarded,\n            totalProcessedSwaps: processedSwaps\n        }\n    }, {\n        upsert: true\n    });\n}\nasync function getOrCreateSystemStats() {\n    const stats = await getSystemStats();\n    if (stats) return stats;\n    return initializeSystemStats();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Uvc3lzdGVtLXN0YXRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvRDtBQUVqQjtBQUVuQyxNQUFNRSxrQkFBa0I7QUFDeEIsTUFBTUMsd0JBQXdCQyxPQUFPQyxRQUFRQyxHQUFHLENBQUNILHFCQUFxQixJQUFJO0FBRW5FLGVBQWVJO0lBQ3BCLE1BQU1DLGFBQWEsTUFBTVIsa0VBQXdCQTtJQUNqRCxPQUFPUSxXQUFXQyxPQUFPLENBQUM7UUFBRUMsS0FBS1I7SUFBZ0I7QUFDbkQ7QUFFTyxlQUFlUztJQUNwQixNQUFNSCxhQUFhLE1BQU1SLGtFQUF3QkE7SUFDakQsTUFBTVksTUFBTSxJQUFJQztJQUNoQixNQUFNQyxhQUFhYixrRkFBUUEsQ0FBQ1csS0FBS1Q7SUFFakMsTUFBTVksUUFBcUI7UUFDekJMLEtBQUtSO1FBQ0xjLGdCQUFnQko7UUFDaEJLLHFCQUFxQkg7UUFDckJJLHFCQUFxQjtRQUNyQkMsaUJBQWlCO0lBQ25CO0lBRUEsTUFBTVgsV0FBV1ksU0FBUyxDQUN4QjtRQUFFVixLQUFLUjtJQUFnQixHQUN2QjtRQUFFbUIsTUFBTU47SUFBTSxHQUNkO1FBQUVPLFFBQVE7SUFBSztJQUdqQixPQUFPUDtBQUNUO0FBRU8sZUFBZVEseUJBQXlCQyxVQUFrQixFQUFFQyxjQUFzQjtJQUN2RixNQUFNakIsYUFBYSxNQUFNUixrRUFBd0JBO0lBQ2pELE1BQU1ZLE1BQU0sSUFBSUM7SUFDaEIsTUFBTUMsYUFBYWIsa0ZBQVFBLENBQUNXLEtBQUtUO0lBRWpDLE1BQU1LLFdBQVdZLFNBQVMsQ0FDeEI7UUFBRVYsS0FBS1I7SUFBZ0IsR0FDdkI7UUFDRW1CLE1BQU07WUFDSkwsZ0JBQWdCSjtZQUNoQksscUJBQXFCSDtRQUN2QjtRQUNBWSxNQUFNO1lBQ0pQLGlCQUFpQks7WUFDakJOLHFCQUFxQk87UUFDdkI7SUFDRixHQUNBO1FBQUVILFFBQVE7SUFBSztBQUVuQjtBQUVPLGVBQWVLO0lBQ3BCLE1BQU1aLFFBQVEsTUFBTVI7SUFDcEIsSUFBSVEsT0FBTyxPQUFPQTtJQUNsQixPQUFPSjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamlrdW5hLXN3YXAtYmFja2VuZC8uL2xpYi9kYXRhYmFzZS9zeXN0ZW0tc3RhdHMudHM/OGZhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24gfSBmcm9tICcuL21vbmdvZGInXHJcbmltcG9ydCB7IFN5c3RlbVN0YXRzIH0gZnJvbSAnQC90eXBlcy9qeHAtdXBkYXRlJ1xyXG5pbXBvcnQgeyBhZGRIb3VycyB9IGZyb20gJ2RhdGUtZm5zJ1xyXG5cclxuY29uc3QgR0xPQkFMX1NUQVRTX0lEID0gJ2dsb2JhbCdcclxuY29uc3QgVVBEQVRFX0lOVEVSVkFMX0hPVVJTID0gTnVtYmVyKHByb2Nlc3MuZW52LlVQREFURV9JTlRFUlZBTF9IT1VSUyB8fCA2KVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN5c3RlbVN0YXRzKCk6IFByb21pc2U8U3lzdGVtU3RhdHMgfCBudWxsPiB7XHJcbiAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGdldFN5c3RlbVN0YXRzQ29sbGVjdGlvbigpXHJcbiAgcmV0dXJuIGNvbGxlY3Rpb24uZmluZE9uZSh7IF9pZDogR0xPQkFMX1NUQVRTX0lEIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU3lzdGVtU3RhdHMoKTogUHJvbWlzZTxTeXN0ZW1TdGF0cz4ge1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBjb25zdCBuZXh0VXBkYXRlID0gYWRkSG91cnMobm93LCBVUERBVEVfSU5URVJWQUxfSE9VUlMpXHJcbiAgXHJcbiAgY29uc3Qgc3RhdHM6IFN5c3RlbVN0YXRzID0ge1xyXG4gICAgX2lkOiBHTE9CQUxfU1RBVFNfSUQsXHJcbiAgICBsYXN0VXBkYXRlVGltZTogbm93LFxyXG4gICAgbmV4dFNjaGVkdWxlZFVwZGF0ZTogbmV4dFVwZGF0ZSxcclxuICAgIHRvdGFsUHJvY2Vzc2VkU3dhcHM6IDAsXHJcbiAgICB0b3RhbEpYUEF3YXJkZWQ6IDBcclxuICB9XHJcbiAgXHJcbiAgYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICB7IF9pZDogR0xPQkFMX1NUQVRTX0lEIH0sXHJcbiAgICB7ICRzZXQ6IHN0YXRzIH0sXHJcbiAgICB7IHVwc2VydDogdHJ1ZSB9XHJcbiAgKVxyXG4gIFxyXG4gIHJldHVybiBzdGF0c1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTGFzdFByb2Nlc3NpbmdUaW1lKGp4cEF3YXJkZWQ6IG51bWJlciwgcHJvY2Vzc2VkU3dhcHM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24oKVxyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICBjb25zdCBuZXh0VXBkYXRlID0gYWRkSG91cnMobm93LCBVUERBVEVfSU5URVJWQUxfSE9VUlMpXHJcbiAgXHJcbiAgYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICB7IF9pZDogR0xPQkFMX1NUQVRTX0lEIH0sXHJcbiAgICB7IFxyXG4gICAgICAkc2V0OiB7XHJcbiAgICAgICAgbGFzdFVwZGF0ZVRpbWU6IG5vdyxcclxuICAgICAgICBuZXh0U2NoZWR1bGVkVXBkYXRlOiBuZXh0VXBkYXRlXHJcbiAgICAgIH0sXHJcbiAgICAgICRpbmM6IHtcclxuICAgICAgICB0b3RhbEpYUEF3YXJkZWQ6IGp4cEF3YXJkZWQsXHJcbiAgICAgICAgdG90YWxQcm9jZXNzZWRTd2FwczogcHJvY2Vzc2VkU3dhcHNcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHsgdXBzZXJ0OiB0cnVlIH1cclxuICApXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVN5c3RlbVN0YXRzKCk6IFByb21pc2U8U3lzdGVtU3RhdHM+IHtcclxuICBjb25zdCBzdGF0cyA9IGF3YWl0IGdldFN5c3RlbVN0YXRzKClcclxuICBpZiAoc3RhdHMpIHJldHVybiBzdGF0c1xyXG4gIHJldHVybiBpbml0aWFsaXplU3lzdGVtU3RhdHMoKVxyXG59ICJdLCJuYW1lcyI6WyJnZXRTeXN0ZW1TdGF0c0NvbGxlY3Rpb24iLCJhZGRIb3VycyIsIkdMT0JBTF9TVEFUU19JRCIsIlVQREFURV9JTlRFUlZBTF9IT1VSUyIsIk51bWJlciIsInByb2Nlc3MiLCJlbnYiLCJnZXRTeXN0ZW1TdGF0cyIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiX2lkIiwiaW5pdGlhbGl6ZVN5c3RlbVN0YXRzIiwibm93IiwiRGF0ZSIsIm5leHRVcGRhdGUiLCJzdGF0cyIsImxhc3RVcGRhdGVUaW1lIiwibmV4dFNjaGVkdWxlZFVwZGF0ZSIsInRvdGFsUHJvY2Vzc2VkU3dhcHMiLCJ0b3RhbEpYUEF3YXJkZWQiLCJ1cGRhdGVPbmUiLCIkc2V0IiwidXBzZXJ0IiwidXBkYXRlTGFzdFByb2Nlc3NpbmdUaW1lIiwianhwQXdhcmRlZCIsInByb2Nlc3NlZFN3YXBzIiwiJGluYyIsImdldE9yQ3JlYXRlU3lzdGVtU3RhdHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database/system-stats.ts\n");

/***/ }),

/***/ "(api)/./lib/utils/formatting.ts":
/*!*********************************!*\
  !*** ./lib/utils/formatting.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatAddress: () => (/* binding */ formatAddress),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   formatDateHuman: () => (/* binding */ formatDateHuman),\n/* harmony export */   formatNumber: () => (/* binding */ formatNumber),\n/* harmony export */   getNextUpdateTime: () => (/* binding */ getNextUpdateTime)\n/* harmony export */ });\n/* harmony import */ var _barrel_optimize_names_addHours_format_date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! __barrel_optimize__?names=addHours,format!=!date-fns */ \"(api)/__barrel_optimize__?names=addHours,format!=!./node_modules/date-fns/index.mjs\");\n\n/**\r\n * Format date to ISO string\r\n */ function formatDate(date) {\n    return date.toISOString();\n}\n/**\r\n * Format date to human-readable format\r\n */ function formatDateHuman(date) {\n    return (0,_barrel_optimize_names_addHours_format_date_fns__WEBPACK_IMPORTED_MODULE_0__.format)(date, \"PPpp\") // Format: Apr 29, 2023, 1:15 PM\n    ;\n}\n/**\r\n * Calculate and format next update time\r\n */ function getNextUpdateTime(lastUpdateTime, intervalHours) {\n    const nextUpdate = (0,_barrel_optimize_names_addHours_format_date_fns__WEBPACK_IMPORTED_MODULE_0__.addHours)(lastUpdateTime, intervalHours);\n    return {\n        nextUpdate,\n        formattedTime: formatDateHuman(nextUpdate)\n    };\n}\n/**\r\n * Format address to shortened format\r\n */ function formatAddress(address) {\n    return `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;\n}\n/**\r\n * Format number to have commas for thousands\r\n */ function formatNumber(num) {\n    return num.toLocaleString();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXRpbHMvZm9ybWF0dGluZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFFM0M7O0NBRUMsR0FDTSxTQUFTRSxXQUFXQyxJQUFVO0lBQ25DLE9BQU9BLEtBQUtDLFdBQVc7QUFDekI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGdCQUFnQkYsSUFBVTtJQUN4QyxPQUFPSCx1RkFBTUEsQ0FBQ0csTUFBTSxRQUFRLGdDQUFnQzs7QUFDOUQ7QUFFQTs7Q0FFQyxHQUNNLFNBQVNHLGtCQUFrQkMsY0FBb0IsRUFBRUMsYUFBcUI7SUFJM0UsTUFBTUMsYUFBYVIseUZBQVFBLENBQUNNLGdCQUFnQkM7SUFDNUMsT0FBTztRQUNMQztRQUNBQyxlQUFlTCxnQkFBZ0JJO0lBQ2pDO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFLGNBQWNDLE9BQWU7SUFDM0MsT0FBTyxDQUFDLEVBQUVBLFFBQVFDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFRCxRQUFRQyxTQUFTLENBQUNELFFBQVFFLE1BQU0sR0FBRyxHQUFHLENBQUM7QUFDaEY7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGFBQWFDLEdBQVc7SUFDdEMsT0FBT0EsSUFBSUMsY0FBYztBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2ppa3VuYS1zd2FwLWJhY2tlbmQvLi9saWIvdXRpbHMvZm9ybWF0dGluZy50cz80N2E2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZvcm1hdCwgYWRkSG91cnMgfSBmcm9tICdkYXRlLWZucydcclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgZGF0ZSB0byBJU08gc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcclxuICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgZGF0ZSB0byBodW1hbi1yZWFkYWJsZSBmb3JtYXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlSHVtYW4oZGF0ZTogRGF0ZSk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGZvcm1hdChkYXRlLCAnUFBwcCcpIC8vIEZvcm1hdDogQXByIDI5LCAyMDIzLCAxOjE1IFBNXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgYW5kIGZvcm1hdCBuZXh0IHVwZGF0ZSB0aW1lXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV4dFVwZGF0ZVRpbWUobGFzdFVwZGF0ZVRpbWU6IERhdGUsIGludGVydmFsSG91cnM6IG51bWJlcik6IHtcclxuICBuZXh0VXBkYXRlOiBEYXRlO1xyXG4gIGZvcm1hdHRlZFRpbWU6IHN0cmluZztcclxufSB7XHJcbiAgY29uc3QgbmV4dFVwZGF0ZSA9IGFkZEhvdXJzKGxhc3RVcGRhdGVUaW1lLCBpbnRlcnZhbEhvdXJzKVxyXG4gIHJldHVybiB7XHJcbiAgICBuZXh0VXBkYXRlLFxyXG4gICAgZm9ybWF0dGVkVGltZTogZm9ybWF0RGF0ZUh1bWFuKG5leHRVcGRhdGUpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IGFkZHJlc3MgdG8gc2hvcnRlbmVkIGZvcm1hdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFkZHJlc3MoYWRkcmVzczogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gYCR7YWRkcmVzcy5zdWJzdHJpbmcoMCwgNil9Li4uJHthZGRyZXNzLnN1YnN0cmluZyhhZGRyZXNzLmxlbmd0aCAtIDQpfWBcclxufVxyXG5cclxuLyoqXHJcbiAqIEZvcm1hdCBudW1iZXIgdG8gaGF2ZSBjb21tYXMgZm9yIHRob3VzYW5kc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW06IG51bWJlcik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIG51bS50b0xvY2FsZVN0cmluZygpXHJcbn0gIl0sIm5hbWVzIjpbImZvcm1hdCIsImFkZEhvdXJzIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJ0b0lTT1N0cmluZyIsImZvcm1hdERhdGVIdW1hbiIsImdldE5leHRVcGRhdGVUaW1lIiwibGFzdFVwZGF0ZVRpbWUiLCJpbnRlcnZhbEhvdXJzIiwibmV4dFVwZGF0ZSIsImZvcm1hdHRlZFRpbWUiLCJmb3JtYXRBZGRyZXNzIiwiYWRkcmVzcyIsInN1YnN0cmluZyIsImxlbmd0aCIsImZvcm1hdE51bWJlciIsIm51bSIsInRvTG9jYWxlU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/utils/formatting.ts\n");

/***/ }),

/***/ "(api)/./pages/api/jxp/status.ts":
/*!*********************************!*\
  !*** ./pages/api/jxp/status.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_database_system_stats__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database/system-stats */ \"(api)/./lib/database/system-stats.ts\");\n/* harmony import */ var _lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database/jxp-updates */ \"(api)/./lib/database/jxp-updates.ts\");\n/* harmony import */ var _lib_database_swap_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/database/swap-events */ \"(api)/./lib/database/swap-events.ts\");\n/* harmony import */ var _lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils/formatting */ \"(api)/./lib/utils/formatting.ts\");\n\n\n\n\n/**\r\n * API endpoint to get system status\r\n * Public endpoint (no authentication required)\r\n */ async function handler(req, res) {\n    // Only allow GET requests\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            success: false,\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // Get system stats\n        const systemStats = await (0,_lib_database_system_stats__WEBPACK_IMPORTED_MODULE_0__.getOrCreateSystemStats)();\n        // Get total pending JXP\n        const totalPendingJXP = await (0,_lib_database_jxp_updates__WEBPACK_IMPORTED_MODULE_1__.getTotalPendingJXP)();\n        // Get total processed swaps (from database stat)\n        const totalProcessedSwaps = systemStats.totalProcessedSwaps;\n        // Get recent swap events\n        const recentSwaps = await (0,_lib_database_swap_events__WEBPACK_IMPORTED_MODULE_2__.getRecentSwapEvents)(5);\n        // Format dates for readability\n        const formattedLastUpdate = (0,_lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__.formatDateHuman)(systemStats.lastUpdateTime);\n        const formattedNextUpdate = (0,_lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__.formatDateHuman)(systemStats.nextScheduledUpdate);\n        // Return status information\n        return res.status(200).json({\n            success: true,\n            systemStatus: {\n                lastUpdateTime: systemStats.lastUpdateTime,\n                lastUpdateTimeFormatted: formattedLastUpdate,\n                nextScheduledUpdate: systemStats.nextScheduledUpdate,\n                nextScheduledUpdateFormatted: formattedNextUpdate,\n                totalProcessedSwaps: (0,_lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__.formatNumber)(totalProcessedSwaps),\n                totalJXPAwarded: (0,_lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__.formatNumber)(systemStats.totalJXPAwarded),\n                pendingJXP: (0,_lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__.formatNumber)(totalPendingJXP),\n                isRunning: true\n            },\n            recentSwaps: recentSwaps.map((swap)=>({\n                    txHash: swap.txHash,\n                    user: swap.user,\n                    timestamp: (0,_lib_utils_formatting__WEBPACK_IMPORTED_MODULE_3__.formatDateHuman)(swap.timestamp),\n                    volumeMON: swap.volumeMON,\n                    calculatedJXP: swap.calculatedJXP,\n                    processed: swap.processed\n                }))\n        });\n    } catch (error) {\n        console.error(\"Error in JXP status API:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvanhwL3N0YXR1cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNvRTtBQUNMO0FBQ3lCO0FBQ2xCO0FBRXRFOzs7Q0FHQyxHQUNjLGVBQWVLLFFBQzVCQyxHQUFtQixFQUNuQkMsR0FBb0I7SUFFcEIsMEJBQTBCO0lBQzFCLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQXFCO0lBQzVFO0lBRUEsSUFBSTtRQUNGLG1CQUFtQjtRQUNuQixNQUFNQyxjQUFjLE1BQU1iLGtGQUFzQkE7UUFFaEQsd0JBQXdCO1FBQ3hCLE1BQU1jLGtCQUFrQixNQUFNYiw2RUFBa0JBO1FBRWhELGlEQUFpRDtRQUNqRCxNQUFNYyxzQkFBc0JGLFlBQVlFLG1CQUFtQjtRQUUzRCx5QkFBeUI7UUFDekIsTUFBTUMsY0FBYyxNQUFNZCw4RUFBbUJBLENBQUM7UUFFOUMsK0JBQStCO1FBQy9CLE1BQU1lLHNCQUFzQmQsc0VBQWVBLENBQUNVLFlBQVlLLGNBQWM7UUFDdEUsTUFBTUMsc0JBQXNCaEIsc0VBQWVBLENBQUNVLFlBQVlPLG1CQUFtQjtRQUUzRSw0QkFBNEI7UUFDNUIsT0FBT2IsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUVSxjQUFjO2dCQUNaSCxnQkFBZ0JMLFlBQVlLLGNBQWM7Z0JBQzFDSSx5QkFBeUJMO2dCQUN6QkcscUJBQXFCUCxZQUFZTyxtQkFBbUI7Z0JBQ3BERyw4QkFBOEJKO2dCQUM5QkoscUJBQXFCWCxtRUFBWUEsQ0FBQ1c7Z0JBQ2xDUyxpQkFBaUJwQixtRUFBWUEsQ0FBQ1MsWUFBWVcsZUFBZTtnQkFDekRDLFlBQVlyQixtRUFBWUEsQ0FBQ1U7Z0JBQ3pCWSxXQUFXO1lBQ2I7WUFDQVYsYUFBYUEsWUFBWVcsR0FBRyxDQUFDQyxDQUFBQSxPQUFTO29CQUNwQ0MsUUFBUUQsS0FBS0MsTUFBTTtvQkFDbkJDLE1BQU1GLEtBQUtFLElBQUk7b0JBQ2ZDLFdBQVc1QixzRUFBZUEsQ0FBQ3lCLEtBQUtHLFNBQVM7b0JBQ3pDQyxXQUFXSixLQUFLSSxTQUFTO29CQUN6QkMsZUFBZUwsS0FBS0ssYUFBYTtvQkFDakNDLFdBQVdOLEtBQUtNLFNBQVM7Z0JBQzNCO1FBQ0Y7SUFDRixFQUFFLE9BQU90QixPQUFPO1FBQ2R1QixRQUFRdkIsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT0wsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUQyxPQUFPQSxpQkFBaUJ3QixRQUFReEIsTUFBTXlCLE9BQU8sR0FBRztRQUNsRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qaWt1bmEtc3dhcC1iYWNrZW5kLy4vcGFnZXMvYXBpL2p4cC9zdGF0dXMudHM/NGRlZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcclxuaW1wb3J0IHsgZ2V0T3JDcmVhdGVTeXN0ZW1TdGF0cyB9IGZyb20gJ0AvbGliL2RhdGFiYXNlL3N5c3RlbS1zdGF0cydcclxuaW1wb3J0IHsgZ2V0VG90YWxQZW5kaW5nSlhQIH0gZnJvbSAnQC9saWIvZGF0YWJhc2UvanhwLXVwZGF0ZXMnXHJcbmltcG9ydCB7IGdldFRvdGFsUHJvY2Vzc2VkU3dhcHMsIGdldFJlY2VudFN3YXBFdmVudHMgfSBmcm9tICdAL2xpYi9kYXRhYmFzZS9zd2FwLWV2ZW50cydcclxuaW1wb3J0IHsgZm9ybWF0RGF0ZUh1bWFuLCBmb3JtYXROdW1iZXIgfSBmcm9tICdAL2xpYi91dGlscy9mb3JtYXR0aW5nJ1xyXG5cclxuLyoqXHJcbiAqIEFQSSBlbmRwb2ludCB0byBnZXQgc3lzdGVtIHN0YXR1c1xyXG4gKiBQdWJsaWMgZW5kcG9pbnQgKG5vIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkKVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXHJcbikge1xyXG4gIC8vIE9ubHkgYWxsb3cgR0VUIHJlcXVlc3RzXHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gR2V0IHN5c3RlbSBzdGF0c1xyXG4gICAgY29uc3Qgc3lzdGVtU3RhdHMgPSBhd2FpdCBnZXRPckNyZWF0ZVN5c3RlbVN0YXRzKClcclxuICAgIFxyXG4gICAgLy8gR2V0IHRvdGFsIHBlbmRpbmcgSlhQXHJcbiAgICBjb25zdCB0b3RhbFBlbmRpbmdKWFAgPSBhd2FpdCBnZXRUb3RhbFBlbmRpbmdKWFAoKVxyXG4gICAgXHJcbiAgICAvLyBHZXQgdG90YWwgcHJvY2Vzc2VkIHN3YXBzIChmcm9tIGRhdGFiYXNlIHN0YXQpXHJcbiAgICBjb25zdCB0b3RhbFByb2Nlc3NlZFN3YXBzID0gc3lzdGVtU3RhdHMudG90YWxQcm9jZXNzZWRTd2Fwc1xyXG4gICAgXHJcbiAgICAvLyBHZXQgcmVjZW50IHN3YXAgZXZlbnRzXHJcbiAgICBjb25zdCByZWNlbnRTd2FwcyA9IGF3YWl0IGdldFJlY2VudFN3YXBFdmVudHMoNSlcclxuICAgIFxyXG4gICAgLy8gRm9ybWF0IGRhdGVzIGZvciByZWFkYWJpbGl0eVxyXG4gICAgY29uc3QgZm9ybWF0dGVkTGFzdFVwZGF0ZSA9IGZvcm1hdERhdGVIdW1hbihzeXN0ZW1TdGF0cy5sYXN0VXBkYXRlVGltZSlcclxuICAgIGNvbnN0IGZvcm1hdHRlZE5leHRVcGRhdGUgPSBmb3JtYXREYXRlSHVtYW4oc3lzdGVtU3RhdHMubmV4dFNjaGVkdWxlZFVwZGF0ZSlcclxuICAgIFxyXG4gICAgLy8gUmV0dXJuIHN0YXR1cyBpbmZvcm1hdGlvblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgc3lzdGVtU3RhdHVzOiB7XHJcbiAgICAgICAgbGFzdFVwZGF0ZVRpbWU6IHN5c3RlbVN0YXRzLmxhc3RVcGRhdGVUaW1lLFxyXG4gICAgICAgIGxhc3RVcGRhdGVUaW1lRm9ybWF0dGVkOiBmb3JtYXR0ZWRMYXN0VXBkYXRlLFxyXG4gICAgICAgIG5leHRTY2hlZHVsZWRVcGRhdGU6IHN5c3RlbVN0YXRzLm5leHRTY2hlZHVsZWRVcGRhdGUsXHJcbiAgICAgICAgbmV4dFNjaGVkdWxlZFVwZGF0ZUZvcm1hdHRlZDogZm9ybWF0dGVkTmV4dFVwZGF0ZSxcclxuICAgICAgICB0b3RhbFByb2Nlc3NlZFN3YXBzOiBmb3JtYXROdW1iZXIodG90YWxQcm9jZXNzZWRTd2FwcyksXHJcbiAgICAgICAgdG90YWxKWFBBd2FyZGVkOiBmb3JtYXROdW1iZXIoc3lzdGVtU3RhdHMudG90YWxKWFBBd2FyZGVkKSxcclxuICAgICAgICBwZW5kaW5nSlhQOiBmb3JtYXROdW1iZXIodG90YWxQZW5kaW5nSlhQKSxcclxuICAgICAgICBpc1J1bm5pbmc6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgcmVjZW50U3dhcHM6IHJlY2VudFN3YXBzLm1hcChzd2FwID0+ICh7XHJcbiAgICAgICAgdHhIYXNoOiBzd2FwLnR4SGFzaCxcclxuICAgICAgICB1c2VyOiBzd2FwLnVzZXIsXHJcbiAgICAgICAgdGltZXN0YW1wOiBmb3JtYXREYXRlSHVtYW4oc3dhcC50aW1lc3RhbXApLFxyXG4gICAgICAgIHZvbHVtZU1PTjogc3dhcC52b2x1bWVNT04sXHJcbiAgICAgICAgY2FsY3VsYXRlZEpYUDogc3dhcC5jYWxjdWxhdGVkSlhQLFxyXG4gICAgICAgIHByb2Nlc3NlZDogc3dhcC5wcm9jZXNzZWRcclxuICAgICAgfSkpXHJcbiAgICB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBKWFAgc3RhdHVzIEFQSTonLCBlcnJvcilcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgIH0pXHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJnZXRPckNyZWF0ZVN5c3RlbVN0YXRzIiwiZ2V0VG90YWxQZW5kaW5nSlhQIiwiZ2V0UmVjZW50U3dhcEV2ZW50cyIsImZvcm1hdERhdGVIdW1hbiIsImZvcm1hdE51bWJlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3lzdGVtU3RhdHMiLCJ0b3RhbFBlbmRpbmdKWFAiLCJ0b3RhbFByb2Nlc3NlZFN3YXBzIiwicmVjZW50U3dhcHMiLCJmb3JtYXR0ZWRMYXN0VXBkYXRlIiwibGFzdFVwZGF0ZVRpbWUiLCJmb3JtYXR0ZWROZXh0VXBkYXRlIiwibmV4dFNjaGVkdWxlZFVwZGF0ZSIsInN5c3RlbVN0YXR1cyIsImxhc3RVcGRhdGVUaW1lRm9ybWF0dGVkIiwibmV4dFNjaGVkdWxlZFVwZGF0ZUZvcm1hdHRlZCIsInRvdGFsSlhQQXdhcmRlZCIsInBlbmRpbmdKWFAiLCJpc1J1bm5pbmciLCJtYXAiLCJzd2FwIiwidHhIYXNoIiwidXNlciIsInRpbWVzdGFtcCIsInZvbHVtZU1PTiIsImNhbGN1bGF0ZWRKWFAiLCJwcm9jZXNzZWQiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/jxp/status.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjxp%2Fstatus&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cjxp%5Cstatus.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();